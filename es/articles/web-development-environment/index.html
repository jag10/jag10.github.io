
<!DOCTYPE html>
<html lang="es">
  <head>
    <meta content='text/html; charset=UTF-8' http-equiv='Content-Type' />
    <meta name=viewport content="width=device-width, initial-scale=1">
    <title>Arboleda - Entorno para desarrollo web</title>
    <meta name="description" content="El blog de Jeferson Arboleda, ingeniero informático. El blog está enfocado en la mejora de mis habilidades y en la superación de los retos que encuentro en mi día a día">
    <meta name="robots" content="noindex">
    
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/manifest.json">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="theme-color" content="#ffffff">
    	
	<meta property="og:title" content="Entorno para desarrollo web" />
	<meta property="og:description" content="En este post vamos a ver un entorno avanzado de desarrollo web. Tendremos nuestra web alojada en un servidor (que NO utilizaremos para nada durante el desarrollo), y en nuestra máquina local tendremos una máquina virtual para el sitio web en el que estemos trabajando. Para la máquina virtual utilizaremos vagrant con el stack de scotch, que nos viene preparado para montar directamente el sitio web sin trabajo extra.

Requisitos previos

Usaremos las siguientes tecnologías. Deberías revisarlas antes de seguir con el artículo.

" />
	<meta property="og:type" content="website" />
	<meta property="og:url" content="https://www.jarboleda.me/es/articles/web-development-environment/" />
	<meta property="og:image" content="https://www.jarboleda.me/articles/img/web-development-environment.jpg" />
	<meta property="og:updated_time" content="2016-07-27 13:50:40 &#43;0200 CEST"/>
	<meta property="og:locale" content="es-ES" />
	<meta property="og:site_name" content="Arboleda" />
	
	
	<meta property="article:published_time" content="2016-07-27 13:50:40 &#43;0200 CEST" />
	<meta property="article:modified_time" content="2016-07-27 13:50:40 &#43;0200 CEST" />
	<meta property="article:section" content="articles" />
	<meta property="article:tag" content="sass" />
	<meta property="article:tag" content="vagrant" />
	<meta property="article:tag" content="nodejs" />
	
	
    
    <meta itemprop="name" content="Entorno para desarrollo web">
    <meta itemprop="description" content="En este post vamos a ver un entorno avanzado de desarrollo web. Tendremos nuestra web alojada en un servidor (que NO utilizaremos para nada durante el desarrollo), y en nuestra máquina local tendremos una máquina virtual para el sitio web en el que estemos trabajando. Para la máquina virtual utilizaremos vagrant con el stack de scotch, que nos viene preparado para montar directamente el sitio web sin trabajo extra.

Requisitos previos

Usaremos las siguientes tecnologías. Deberías revisarlas antes de seguir con el artículo.

">
    <meta name="author" content="Jeferson Arboleda">
    
    <meta itemprop="image" content="web-development-environment.jpg">
    
    <meta itemprop="keywords" content="notpinned,pinned,,true,serie1,bash,centos6,curl,cwp,fedora25,fopen,httpd,magento,magento2,mate,mysql,mysqldump,nodejs,odroid,php,php7,piwik,processwire,reflectionmethod,sass,ubuntu,unrealengine,vagrant,vm," />
    <meta itemprop="wordCount" content="1388">
	
	<meta name="twitter:card" content="summary_large_image"/>
	<meta name="twitter:image:src" content="https://www.jarboleda.me/articles/img/web-development-environment.jpg"/>
	
	<meta name="twitter:title" content="Entorno para desarrollo web"/>
	<meta name="twitter:description" content="En este post vamos a ver un entorno avanzado de desarrollo web. Tendremos nuestra web alojada en un servidor (que NO utilizaremos para nada durante el desarrollo), y en nuestra máquina local tendremos una máquina virtual para el sitio web en el que estemos trabajando. Para la máquina virtual utilizaremos vagrant con el stack de scotch, que nos viene preparado para montar directamente el sitio web sin trabajo extra.

Requisitos previos

Usaremos las siguientes tecnologías. Deberías revisarlas antes de seguir con el artículo.

"/>
	<meta name="twitter:site" content="@j_a_g_x"/>
	
	<meta name="twitter:creator" content="@j_a_g_x"/>


	<meta name="news_keywords" content="sass,vagrant,nodejs" />

    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">
    <link href="/css/global.min.css" media="screen" rel="stylesheet" type="text/css" />
  </head>
 <body>
  <header>
    <nav class='top-menu'>
      
      <div class="menu-wrapper" id="menu">
        <div class="pure-u-1 hidden">
          <div class="pure-menu menu-toogle-container">
            <a class="custom-toggle" id="toggle"><s class="bar"></s><s class="bar"></s></a>
          </div>
        </div>
        <div class="pure-u-1">
          <div class="pure-menu pure-menu-horizontal custom-can-transform">
            <ul class="pure-menu-list float-left">
              
              <li class="pure-menu-item"><a class='pure-menu-link' href=/es>home</a></li>
              
              <li class="pure-menu-item"><a class='pure-menu-link' href=/extras/cv/>sobre mi</a></li>
              
              <li class="pure-menu-item"><a class='pure-menu-link' href=/projects/>proyectos</a></li>
              
              <li class="pure-menu-item"><a class='pure-menu-link' href=https://github.com/jag10>github</a></li>
              
              <li class="pure-menu-item"><a class='pure-menu-link' href=https://gitlab.com/jag7>gitlab</a></li>
              
              <li class='pure-menu-item lang_selector selected'>
                
                <a class='pure-menu-link' href="#">Spanish</a>
                
              </li>
              <li class='pure-menu-item flag'><i class='fa fa-language' aria-hidden='true'></i></li>
               
              <li class='pure-menu-item lang_selector'>
                <a class='pure-menu-link' href="/articles/web-development-environment/">english </a>
              </li>
               
            </ul>
            <div class="float-right">
              <ul class="pure-menu-list">
                
                <li class="pure-menu-item social_menu_entry">
                  <a href='https://www.linkedin.com/in/167429134' target='_blank'><i class='fa fa-linkedin'></i></a>
                </li>
                
                
                <li class="pure-menu-item social_menu_entry">
                  <a href='https://github.com/jag10' target='_blank'><i class='fa fa-github'></i></a>
                </li>
                
                
                <li class="pure-menu-item social_menu_entry">
                  <a href='https://gitlab.com/jag7' target='_blank'><i class='fa fa-gitlab'></i></a>
                </li>
                
                
                <li class="pure-menu-item social_menu_entry">
                  <a href='https://twitter.com/j_a_g_x' target='_blank'><i class='fa fa-twitter'></i></a>
                </li>
                
                <li class='pure-menu-item nt-search' id='nt-search'>
                  <form action='/search/' id='searchform' method='get'>
                    <div class='nt-search-input-wrap'>
                      <input class='nt-search-input' id='s' name='q' placeholder='Search is disabled :(' type='text' value='' disabled />
                    </div>
                    <input class='nt-search-submit' id='go' type='submit' value='Search' />
                    <span class='nt fa fa-search'></span>
                  </form>
                </li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </nav>
    
    
  </header>

  <div class="main-container">
    <section id="main" class="pure-u-1 pure-u-md-3-4">
      <article>
        <div class="post-container">
  
  <div class="article_summary">
    <div class="article-date">
      <p class="day"><i class="fa fa-calendar"></i>27 Jul 2016</p>
      <p><i class="fa fa-clock-o"></i>8 min read  ~ 1400 words</p>
    </div>
    
    <div class="article-tags">
      
      <a href="#" rel="tag">sass</a> 
      <a href="#" rel="tag">vagrant</a> 
      <a href="#" rel="tag">nodejs</a> 
    </div>
    
    <div class="clearfix"></div>
    
    <h1 class="article_title title">Entorno para desarrollo web</h1>
    
    <div class="article_excerpt">
      
      <p><p>En este post vamos a ver un entorno avanzado de desarrollo web. Tendremos nuestra web alojada en un servidor (que NO utilizaremos para nada durante el desarrollo), y en nuestra máquina local tendremos una máquina virtual para el sitio web en el que estemos trabajando. Para la máquina virtual utilizaremos vagrant con el stack de <a href="https://box.scotch.io/">scotch</a>, que nos viene preparado para montar directamente el sitio web sin trabajo extra.</p>

<h2 id="requisitos-previos">Requisitos previos</h2>

<p>Usaremos las siguientes tecnologías. Deberías revisarlas antes de seguir con el artículo.</p>

<p></p>

<ul>
<li>Vagrant. Vagrant permite crear entornos de desarrollo de manera rápida y sencilla</li>
<li>virtualbox. Vagrant utiliza máquinas virtuales y para ello hace uso de virtualbox</li>
<li>nodejs. Nodejs proporciona un entorno para ejecutar las utilidades necesarias</li>
<li>npm. npm permite manejar los paquetes que incluyen utilidades para el desarrollo</li>
<li>adminer. Se trata de una versión ligera de phpmyadmin. La principal ventaja es que se instala con un único archivo .php</li>
<li>sass. Sass es una extensión para css que permite producir código css más eficiente, ahorrando trabajo y mejorando la mantenibilidad.</li>
<li>compass. Compass es un framework css que utiliza sass como lenguaje</li>
<li>gulp (autoprefixer, cleanCSS, uglify, etc.) Gulp permite automatizar tareas en el desarrollo web</li>
<li>livereload. Con livereload podremos desarrollar en sass, compilarlo automáticamente con gulp cuando guardemos y actualizar el navegador de manera automática</li>
<li>git. Git lo utilizaremos para el control de versiones</li>
</ul>

<h2 id="instalando-vagrant">Instalando vagrant</h2>

<p>Bien, el primer paso es instalar vagrant con virtualbox. Vamos a ver los pasos necesarios en <strong>Fedora</strong>, pero para el resto de distribuciones es muy parecido. En primer lugar, hay que instalar el repositorio de virtualbox. Para ello:
<div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span></span><span style="color: #f8f8f2">cd</span> /etc/yum.repos.d/
wget http://download.virtualbox.org/virtualbox/rpm/fedora/virtualbox.repo
<span style="color: #75715e">#Instalamos las dependencias</span>
dnf install binutils gcc make patch libgomp glibc-headers glibc-devel kernel-headers kernel-devel dkms
</pre></div>

Finalmente, instalaremos virtualbox. Yo he tenido que instalar la versión 5.0 porque actualmente vagrant no es compatible con la versión 5.1:
<div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span></span>dnf install VirtualBox-5.0
</pre></div>

Ahora instalaremos vagrant, tan fácil como:
<div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span></span>dnf install vagrant
</pre></div>

El siguiente paso consiste en ir a la <a href="https://box.scotch.io/">web de scotch</a> e instalar su máquina virtual:
<div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span></span>mdir -p ~/vagrant/dev
<span style="color: #f8f8f2">cd</span> ~/vagrant/dev/
git clone https://github.com/scotch-io/scotch-box.git my-project
vagrant up --provider<span style="color: #f92672">=</span>virtualbox
</pre></div>

La primera vez vagrant tendrá que descargarse la imagen y tardará un tiempo. Una vez la máquina esté instalada, podremos verla en <a href="http://192.168.33.10/">http://192.168.33.10/</a>
Bien, ya tenemos el entorno virtual montado, el siguiente paso es montar la web sobre la que queremos desarrollar en nuestro entorno de pruebas. Para ello migraremos los ficheros (comprimiéndolos en zip) y la base de datos la exportaremos como un fichero .sql ya sea con phpmyadmin o por terminal:
<div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span></span>mysqldump -u db_username -p db_name &gt; db_name.sql
</pre></div>

Por defecto, la máquina de scotch hace que el directorio donde instalamos la máquina (~/vagrant/dev) sea compartido con la máquina virtual en /var/www/, por lo que podremos descomprimir ahí la web. Tendremos que importar también la base de datos. Lo más sencillo es utilizar <a href="https://www.adminer.org/">adminer</a>, basta con descargarlo y dejarlo en la raíz de la web:
<div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span></span><span style="color: #f8f8f2">cd</span> ~/vagrant/dev/public/
wget https://www.adminer.org/static/download/4.2.5/adminer-4.2.5.php
</pre></div>

Si nuestro backup ocupa más de 2M, editaremos el fichero /etc/php5/apache2/php.ini y modificaremos la directiva upload_max_filesize y pondremos un tamaño acorde a nuestras necesidades (256M, por ejemplo). Una vez la web esté importada, es recomendable verificar el fichero .htaccess de nuestra web por si tenemos que hacer modificaciones para adaptarlo al nuevo entorno, como por ejemplo desactivar ssl. Además, deberemos modificar la conexión a la base de datos de nuestra web con los siguientes datos:
* Key             Value
* Database Name scotchbox
* Database User root
* Database Password root
* Database Host localhost</p>

<p>También podemos entrar en adminer y crear una nueva base de datos.</p>

<h2 id="estructura-de-directorios">Estructura de directorios</h2>

<p>La estructura de ficheros para el desarrollo que utilizo es la siguiente:
<div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span></span><span style="color: #a6e22e">/templates/</span>
<span style="color: #a6e22e">|--</span><span style="color: #f8f8f2"> css &lt; Aquí se incluye el fichero global.min.css utilizado en producción </span><span style="color: #f92672">(</span><span style="color: #a6e22e">y</span><span style="color: #f8f8f2"> cualquier otro, si hubiera más</span><span style="color: #f92672">)</span>
<span style="color: #a6e22e">|--</span><span style="color: #f8f8f2"> fonts &lt; fuentes</span>
<span style="color: #a6e22e">|--</span><span style="color: #f8f8f2"> img &lt; imágenes utilizadas en el tema</span>
<span style="color: #a6e22e">|--</span><span style="color: #f8f8f2"> js &lt; ficheros </span><span style="color: #ae81ff">.</span><span style="color: #f8f8f2">min.js de producción</span>
<span style="color: #a6e22e">|--</span><span style="color: #f8f8f2"> lib &lt; librerías necesarias en el tema</span>
<span style="color: #a6e22e">|--</span><span style="color: #f8f8f2"> node_modules &lt; módulos utilizados en desarrollo</span>
<span style="color: #a6e22e">|--</span><span style="color: #f8f8f2"> partials &lt; ficheros que contienen partes del tema </span><span style="color: #f92672">(</span><span style="color: #a6e22e">widgets,</span><span style="color: #f8f8f2"> comentarios, etc</span><span style="color: #f92672">)</span>
<span style="color: #a6e22e">|--</span><span style="color: #f8f8f2"> src &lt; código fuente de desarrollo</span>
<span style="color: #a6e22e">|----sass</span><span style="color: #f8f8f2"> &lt; ficheros sass de desarrollo</span>
<span style="color: #a6e22e">|------modules</span><span style="color: #f8f8f2"> &lt; utilidades sass, no producen código </span><span style="color: #ae81ff">.</span><span style="color: #f8f8f2">css </span><span style="color: #f92672">(</span><span style="color: #a6e22e">ej:</span><span style="color: #f8f8f2"> definir variables, placeholders, mixins</span><span style="color: #f92672">)</span>
<span style="color: #a6e22e">|------partials</span><span style="color: #f8f8f2"> &lt; ficheros sass para dar estilo a ciertas partes de la web </span><span style="color: #f92672">(</span><span style="color: #a6e22e">ej:</span><span style="color: #f8f8f2"> menu.sass, article.sass, etc.</span><span style="color: #f92672">)</span>
<span style="color: #a6e22e">|------vendor</span><span style="color: #f8f8f2"> &lt; librerías de terceros </span><span style="color: #f92672">(</span><span style="color: #a6e22e">bootstrap,</span><span style="color: #f8f8f2"> purecss, foundation, etc.</span><span style="color: #f92672">)</span>
<span style="color: #a6e22e">|----js</span><span style="color: #f8f8f2"> &lt; ficheros js de desarrollo</span>
<span style="color: #a6e22e">.php</span><span style="color: #f8f8f2"> &lt; templates </span><span style="color: #f92672">(</span><span style="color: #a6e22e">header.php,</span><span style="color: #f8f8f2"> footer.php. etc.</span><span style="color: #f92672">)</span>
</pre></div>
</p>

<h2 id="automatizando-tareas">Automatizando tareas</h2>

<p>Ya tenemos el entorno montado, el siguiente paso será utilizar gulp y compass para automatizar algunas tareas como compilar sass o comprimir los ficheros js. Para ello, empezaremos por instalar ruby en la <strong>máquina virtual</strong>:
<div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span></span>vagrant ssh
su root
apt-get install ruby
gem update --system
gem install compass
</pre></div>

Luego procederemos a instalar nodejs y npm (disponibles en los repositorios oficiales, sin líos):
<div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span></span>apt-get install nodejs npm
</pre></div>

Ahora podremos instalar y configurar gulp para automatizar tareas:
<div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span></span><span style="color: #f8f8f2">cd</span> ~/vagrant/dev/
npm init
npm install --global gulp-cli
npm install --save-dev gulp
compass create &lt;project_name&gt;
</pre></div>

Ya tenemos gulp y compass disponible, ahora tendremos que indicarle qué tareas queremos automatizar. Aquí voy a poner el gulpfile.js que utilizo yo, puedes modificarlo para ajustarlo a tus necesidades. Este fichero hace:</p>

<ul>
<li>Inicializa todas las dependencias necesarias</li>
<li>Establece los directorios en que van a estar nuestros ficheros scss y js</li>
<li>Crea la tarea &lsquo;css&rsquo;, que se encarga de compilar los ficheros scss con compass, llamar a autoprefixer para obtener compatibilidad con 2 las últimas de los principales navegadores y finalmente escribir en disco una versión normal de los css y su versión para producción (.min.css)</li>
<li>Crea la tarea &lsquo;js&rsquo; que se encarga de concatenar todos los ficheros js en uno solo y de generar su versión normal y de producción (.min.js)</li>
<li>Crea la tarea &lsquo;live&rsquo;, que se encarga de inicializar livereload, vigilar los ficheros scss y js para compilar cuando sea necesario y finalmente, vigilar ficheros .php, .css y .js para autorecargar el navegador cuando sea necesario.</li>
</ul>

<p>Aquí os dejo el fichero gulpfile.js. Antes de utilizarlo hay que instalar las dependencias necesarias:</p>

<p><div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span></span>npm install --save-dev gulp gulp-compass gulp-autoprefixer gulp-rename gulp-clean-css gulp-uglify gulp-concat gulp-livereload gulp-plumber gulp-path
</pre></div>

<div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span></span><span style="color: #66d9ef">var</span> <span style="color: #a6e22e">gulp</span> <span style="color: #f92672">=</span> <span style="color: #a6e22e">require</span><span style="color: #f8f8f2">(</span><span style="color: #e6db74">&#39;gulp&#39;</span><span style="color: #f8f8f2">),</span>
    <span style="color: #a6e22e">compass</span> <span style="color: #f92672">=</span> <span style="color: #a6e22e">require</span><span style="color: #f8f8f2">(</span><span style="color: #e6db74">&#39;gulp-compass&#39;</span><span style="color: #f8f8f2">),</span>
    <span style="color: #a6e22e">autoprefixer</span> <span style="color: #f92672">=</span> <span style="color: #a6e22e">require</span><span style="color: #f8f8f2">(</span><span style="color: #e6db74">&#39;gulp-autoprefixer&#39;</span><span style="color: #f8f8f2">),</span>
    <span style="color: #a6e22e">rename</span> <span style="color: #f92672">=</span> <span style="color: #a6e22e">require</span><span style="color: #f8f8f2">(</span><span style="color: #e6db74">&#39;gulp-rename&#39;</span><span style="color: #f8f8f2">),</span>
    <span style="color: #75715e">// minifycss = require(&#39;gulp-minify-css&#39;),</span>
    <span style="color: #a6e22e">cleanCSS</span> <span style="color: #f92672">=</span> <span style="color: #a6e22e">require</span><span style="color: #f8f8f2">(</span><span style="color: #e6db74">&#39;gulp-clean-css&#39;</span><span style="color: #f8f8f2">);</span>
    <span style="color: #a6e22e">uglify</span> <span style="color: #f92672">=</span> <span style="color: #a6e22e">require</span><span style="color: #f8f8f2">(</span><span style="color: #e6db74">&#39;gulp-uglify&#39;</span><span style="color: #f8f8f2">),</span>
    <span style="color: #a6e22e">concat</span> <span style="color: #f92672">=</span> <span style="color: #a6e22e">require</span><span style="color: #f8f8f2">(</span><span style="color: #e6db74">&#39;gulp-concat&#39;</span><span style="color: #f8f8f2">)</span>
    <span style="color: #a6e22e">livereload</span> <span style="color: #f92672">=</span> <span style="color: #a6e22e">require</span><span style="color: #f8f8f2">(</span><span style="color: #e6db74">&#39;gulp-livereload&#39;</span><span style="color: #f8f8f2">)</span>
    <span style="color: #a6e22e">plumber</span> <span style="color: #f92672">=</span> <span style="color: #a6e22e">require</span><span style="color: #f8f8f2">(</span><span style="color: #e6db74">&#39;gulp-plumber&#39;</span><span style="color: #f8f8f2">),</span>
    <span style="color: #a6e22e">path</span> <span style="color: #f92672">=</span> <span style="color: #a6e22e">require</span><span style="color: #f8f8f2">(</span><span style="color: #e6db74">&#39;path&#39;</span><span style="color: #f8f8f2">);</span>

<span style="color: #66d9ef">var</span> <span style="color: #a6e22e">sass_dir</span> <span style="color: #f92672">=</span> <span style="color: #e6db74">&#39;./src/sass/**/*.scss&#39;</span><span style="color: #f8f8f2">,</span>
    <span style="color: #a6e22e">js_dir</span>   <span style="color: #f92672">=</span> <span style="color: #e6db74">&#39;./src/js/**/*.js&#39;</span><span style="color: #f8f8f2">;</span>

<span style="color: #a6e22e">gulp</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">task</span><span style="color: #f8f8f2">(</span><span style="color: #e6db74">&#39;default&#39;</span><span style="color: #f8f8f2">,</span> <span style="color: #66d9ef">function</span><span style="color: #f8f8f2">()</span> <span style="color: #f8f8f2">{</span>
  <span style="color: #75715e">// place code for your default task here</span>
<span style="color: #f8f8f2">});</span>

<span style="color: #a6e22e">gulp</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">task</span><span style="color: #f8f8f2">(</span><span style="color: #e6db74">&#39;live&#39;</span><span style="color: #f8f8f2">,</span> <span style="color: #66d9ef">function</span><span style="color: #f8f8f2">(){</span>
  <span style="color: #a6e22e">livereload</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">listen</span><span style="color: #f8f8f2">();</span>
  <span style="color: #a6e22e">gulp</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">watch</span><span style="color: #f8f8f2">(</span><span style="color: #a6e22e">sass_dir</span><span style="color: #f8f8f2">,</span> <span style="color: #f8f8f2">[</span><span style="color: #e6db74">&#39;css&#39;</span><span style="color: #f8f8f2">]);</span>
  <span style="color: #a6e22e">gulp</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">watch</span><span style="color: #f8f8f2">(</span><span style="color: #a6e22e">js_dir</span><span style="color: #f8f8f2">,</span> <span style="color: #f8f8f2">[</span><span style="color: #e6db74">&#39;js&#39;</span><span style="color: #f8f8f2">]);</span>

  <span style="color: #75715e">//reload when a template file, the minified css, or the minified js file changes</span>
  <span style="color: #a6e22e">gulp</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">watch</span><span style="color: #f8f8f2">([</span><span style="color: #e6db74">&#39;partials/*.php&#39;</span><span style="color: #f8f8f2">,</span> <span style="color: #e6db74">&#39;*.php&#39;</span><span style="color: #f8f8f2">,</span> <span style="color: #e6db74">&#39;css/*.css&#39;</span><span style="color: #f8f8f2">,</span> <span style="color: #e6db74">&#39;js/*.js&#39;</span><span style="color: #f8f8f2">],</span> <span style="color: #66d9ef">function</span><span style="color: #f8f8f2">(</span><span style="color: #a6e22e">event</span><span style="color: #f8f8f2">)</span> <span style="color: #f8f8f2">{</span>
    <span style="color: #a6e22e">gulp</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">src</span><span style="color: #f8f8f2">(</span><span style="color: #a6e22e">event</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">path</span><span style="color: #f8f8f2">)</span>
      <span style="color: #f8f8f2">.</span><span style="color: #a6e22e">pipe</span><span style="color: #f8f8f2">(</span><span style="color: #a6e22e">plumber</span><span style="color: #f8f8f2">())</span>
      <span style="color: #f8f8f2">.</span><span style="color: #a6e22e">pipe</span><span style="color: #f8f8f2">(</span><span style="color: #a6e22e">livereload</span><span style="color: #f8f8f2">())</span>
  <span style="color: #f8f8f2">});</span>
<span style="color: #f8f8f2">});</span>

<span style="color: #75715e">// sass</span>
<span style="color: #a6e22e">gulp</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">task</span><span style="color: #f8f8f2">(</span><span style="color: #e6db74">&#39;css&#39;</span><span style="color: #f8f8f2">,</span> <span style="color: #66d9ef">function</span><span style="color: #f8f8f2">()</span> <span style="color: #f8f8f2">{</span>
  <span style="color: #a6e22e">gulp</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">src</span><span style="color: #f8f8f2">(</span><span style="color: #a6e22e">sass_dir</span><span style="color: #f8f8f2">)</span>
  <span style="color: #f8f8f2">.</span><span style="color: #a6e22e">pipe</span><span style="color: #f8f8f2">(</span><span style="color: #a6e22e">plumber</span><span style="color: #f8f8f2">())</span>
  <span style="color: #f8f8f2">.</span><span style="color: #a6e22e">pipe</span><span style="color: #f8f8f2">(</span><span style="color: #a6e22e">compass</span><span style="color: #f8f8f2">({</span>
    <span style="color: #a6e22e">config_file</span><span style="color: #f92672">:</span> <span style="color: #e6db74">&#39;./config.rb&#39;</span><span style="color: #f8f8f2">,</span>
    <span style="color: #a6e22e">css</span><span style="color: #f92672">:</span> <span style="color: #e6db74">&#39;css&#39;</span><span style="color: #f8f8f2">,</span>
    <span style="color: #a6e22e">sass</span><span style="color: #f92672">:</span> <span style="color: #e6db74">&#39;src/sass&#39;</span>
  <span style="color: #f8f8f2">}))</span>
  <span style="color: #f8f8f2">.</span><span style="color: #a6e22e">pipe</span><span style="color: #f8f8f2">(</span><span style="color: #a6e22e">autoprefixer</span><span style="color: #f8f8f2">({</span>
    <span style="color: #75715e">// browsers: [&#39;last 5 versions&#39;],</span>
    <span style="color: #a6e22e">browsers</span><span style="color: #f92672">:</span> <span style="color: #f8f8f2">[</span><span style="color: #e6db74">&#39;&gt; 1%&#39;</span><span style="color: #f8f8f2">],</span>
    <span style="color: #a6e22e">remove</span><span style="color: #f92672">:</span> <span style="color: #66d9ef">true</span><span style="color: #f8f8f2">,</span>
  <span style="color: #f8f8f2">}))</span>
  <span style="color: #f8f8f2">.</span><span style="color: #a6e22e">pipe</span><span style="color: #f8f8f2">(</span><span style="color: #a6e22e">gulp</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">dest</span><span style="color: #f8f8f2">(</span><span style="color: #e6db74">&#39;./css&#39;</span><span style="color: #f8f8f2">))</span>
  <span style="color: #f8f8f2">.</span><span style="color: #a6e22e">pipe</span><span style="color: #f8f8f2">(</span><span style="color: #a6e22e">rename</span><span style="color: #f8f8f2">({</span> <span style="color: #a6e22e">suffix</span><span style="color: #f92672">:</span> <span style="color: #e6db74">&#39;.min&#39;</span> <span style="color: #f8f8f2">}))</span>
  <span style="color: #f8f8f2">.</span><span style="color: #a6e22e">pipe</span><span style="color: #f8f8f2">(</span><span style="color: #a6e22e">cleanCSS</span><span style="color: #f8f8f2">())</span>
  <span style="color: #f8f8f2">.</span><span style="color: #a6e22e">pipe</span><span style="color: #f8f8f2">(</span><span style="color: #a6e22e">gulp</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">dest</span><span style="color: #f8f8f2">(</span><span style="color: #e6db74">&#39;./css&#39;</span><span style="color: #f8f8f2">));</span>
<span style="color: #f8f8f2">});</span>

<span style="color: #75715e">//js</span>
<span style="color: #a6e22e">gulp</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">task</span><span style="color: #f8f8f2">(</span><span style="color: #e6db74">&#39;js&#39;</span><span style="color: #f8f8f2">,</span> <span style="color: #66d9ef">function</span><span style="color: #f8f8f2">()</span> <span style="color: #f8f8f2">{</span>
  <span style="color: #66d9ef">return</span> <span style="color: #a6e22e">gulp</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">src</span><span style="color: #f8f8f2">(</span><span style="color: #a6e22e">js_dir</span><span style="color: #f8f8f2">)</span>
  	<span style="color: #f8f8f2">.</span><span style="color: #a6e22e">pipe</span><span style="color: #f8f8f2">(</span><span style="color: #a6e22e">concat</span><span style="color: #f8f8f2">(</span><span style="color: #e6db74">&#39;main.js&#39;</span><span style="color: #f8f8f2">))</span>
  	<span style="color: #f8f8f2">.</span><span style="color: #a6e22e">pipe</span><span style="color: #f8f8f2">(</span><span style="color: #a6e22e">gulp</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">dest</span><span style="color: #f8f8f2">(</span><span style="color: #e6db74">&#39;js/&#39;</span><span style="color: #f8f8f2">))</span>
  	<span style="color: #f8f8f2">.</span><span style="color: #a6e22e">pipe</span><span style="color: #f8f8f2">(</span><span style="color: #a6e22e">rename</span><span style="color: #f8f8f2">({</span> <span style="color: #a6e22e">suffix</span><span style="color: #f92672">:</span> <span style="color: #e6db74">&#39;.min&#39;</span> <span style="color: #f8f8f2">}))</span>
  	<span style="color: #f8f8f2">.</span><span style="color: #a6e22e">pipe</span><span style="color: #f8f8f2">(</span><span style="color: #a6e22e">uglify</span><span style="color: #f8f8f2">())</span>
  	<span style="color: #f8f8f2">.</span><span style="color: #a6e22e">pipe</span><span style="color: #f8f8f2">(</span><span style="color: #a6e22e">gulp</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">dest</span><span style="color: #f8f8f2">(</span><span style="color: #e6db74">&#39;js/&#39;</span><span style="color: #f8f8f2">));</span>
<span style="color: #f8f8f2">});</span>
</pre></div>
</p>

<p>Como estamos trabajando en una máquina virtual, la extensión livereload no verá el servidor livereload porque lo va a buscar en localhost:35729. Para solucionarlo, tendremos que redigir el puerto 35729 de nuestra máquina local al puerto 35729 de la máquina virtual. Para ello:
<div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span></span><span style="color: #a6e22e">ssh</span> <span style="color: #f92672">-</span><span style="color: #a6e22e">L</span> <span style="color: #ae81ff">35729</span><span style="color: #f92672">:</span><span style="color: #ae81ff">192.168</span><span style="color: #f8f8f2">.</span><span style="color: #ae81ff">33.10</span><span style="color: #f92672">:</span><span style="color: #ae81ff">35729</span> <span style="color: #a6e22e">vagrant</span><span style="color: #960050; background-color: #1e0010">@</span><span style="color: #ae81ff">192.168</span><span style="color: #f8f8f2">.</span><span style="color: #ae81ff">33.10</span>
</pre></div>

Ya está todo listo, ahora podremos utilizar gulp para automatizar tareas. Desde el directorio del proyecto:
<div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span></span><span style="color: #a6e22e">gulp</span> <span style="color: #a6e22e">live</span>
</pre></div>

Ya tenemos todo listo, si hemos seguido los pasos podremos modificar código en ~/vagrant/dev y ver los cambios de manera instantánea en Chrome, lo que nos da un entorno de trabajo muy ágil y en el que podremos hacer las pruebas que queramos sin afectar al entorno real.
En cuanto a la metodología a utilizar en git, queda a elección del desarrollador. Personalmente, siempre tengo 3 branches &ldquo;infinitos&rdquo;, que son:</p>

<ul>
<li>master. Contiene el código que se utiliza en el servidor web</li>
<li>staging. Aquí se incluye el código fuente antes de pasarlo al master. Es un entorno preparado para ser lo más parecido posible al entorno final, por ello no se incluyen los ficheros utilizados en desarrollo (sass y js). Sólo se incluyen sus versiones minificadas para producción</li>
<li>dev. Aquí se incluye todo el código del template, incluyendo ficheros sass, js, gulpfile, package.json, etc.</li>
</ul>

<p>Este repositorio no contiene toda la web, sólo el directorio que contiene el tema/plugin que se esté desarrollando.</p>

<h2 id="aclaraciones">Aclaraciones</h2>

<p>nodejs, npm, gulp, livereload&hellip; todos estos paquetes deben instalarse en la máquina virtual, aunque por comodidad también pueden instalarse en la máquina real, excepto livereload, que tiene que estar en el servidor (máquina virtual)</p></p>
      
    </div>
    <div class="clearfix"></div>
    
    <div class="article_resources">
      <h2>Resources</h2>
      <ul>
        
        <li>
          
          <a target="_blank" href="https://www.if-not-true-then-false.com/2010/install-virtualbox-with-yum-on-fedora-centos-red-hat-rhel/">VirtualBox 5.1 en Fedora 25/24, CentOS/RHEL 7.3/6.9/5.11</a> 
        </li>
        
        <li>
          
          <a target="_blank" href="https://box.scotch.io/">Scotch box</a> 
        </li>
        
        <li>
          
          <a target="_blank" href="https://www.adminer.org/static/download/4.2.5/adminer-4.2.5.php">adminer en adminer.org</a> 
        </li>
        
      </ul>
    </div>
    
    <div class="article-footer">
      
      




<div class="soc-sharing">
  <ul class="article_share_items">
    <li>
      <a class="fa fa-linkedin" href="http://www.linkedin.com/shareArticle?mini=true&amp;url=https://www.jarboleda.me/es/articles/web-development-environment/&amp;title=Entorno%20para%20desarrollo%20web&amp;summary=%3cp%3eEn%20este%20post%20vamos%20a%20ver%20un%20entorno%20avanzado%20de%20desarrollo%20web.%20Tendremos%20nuestra%20web%20alojada%20en%20un%20servidor%20%28que%20NO%20utilizaremos%20para%20nada%20durante%20el%20desarrollo%29,%20y%20en%20nuestra%20m%c3%a1quina%20local%20tendremos%20una%20m%c3%a1quina%20virtual%20para%20el%20sitio%20web%20en%20el%20que%20estemos%20trabajando.%20Para%20la%20m%c3%a1quina%20virtual%20utilizaremos%20vagrant%20con%20el%20stack%20de%20%3ca%20href=%22https://box.scotch.io/%22%3escotch%3c/a%3e,%20que%20nos%20viene%20preparado%20para%20montar%20directamente%20el%20sitio%20web%20sin%20trabajo%20extra.%3c/p%3e%0a%0a%3ch2%20id=%22requisitos-previos%22%3eRequisitos%20previos%3c/h2%3e%0a%0a%3cp%3eUsaremos%20las%20siguientes%20tecnolog%c3%adas.%20Deber%c3%adas%20revisarlas%20antes%20de%20seguir%20con%20el%20art%c3%adculo.%3c/p%3e%0a%0a%3cp%3e%3c/p%3e&amp;source=Arboleda" onclick="window.open(this.href, 'windowName', 'width=550, height=600, left=24, top=24, scrollbars, resizable'); return false" rel="nofollow" target="_blank"></a>
    </li>
    <li>
      <a class="fa fa-twitter" href="http://twitter.com/share?text=Entorno%20para%20desarrollo%20web&amp;url=https://www.jarboleda.me/es/articles/web-development-environment/" onclick="window.open(this.href, 'windowName', 'width=550, height=600, left=24, top=24, scrollbars, resizable'); return false" rel="nofollow" target="_blank"></a>
    </li>
    <li>
      <a class="fa fa-facebook" href="https://www.facebook.com/sharer/sharer.php?u=https://www.jarboleda.me/es/articles/web-development-environment/" onclick="window.open(this.href, 'windowName', 'width=550, height=600, left=24, top=24, scrollbars, resizable'); return false" rel="nofollow" target="_blank"></a>
    </li>
    <li>
      <a class="fa fa-google-plus" href="https://plus.google.com/share?url=https://www.jarboleda.me/es/articles/web-development-environment/" onclick="window.open(this.href, 'windowName', 'width=550, height=600, left=24, top=24, scrollbars, resizable'); return false" rel="nofollow" target="_blank"></a>
    </li>
    <li>
      <a class="fa fa-pinterest" href="https://pinterest.com/pin/create/button/?url=https://www.jarboleda.me/es/articles/web-development-environment/&amp;media=https://www.jarboleda.meweb-development-environment.jpg&amp;description=%3cp%3eEn%20este%20post%20vamos%20a%20ver%20un%20entorno%20avanzado%20de%20desarrollo%20web.%20Tendremos%20nuestra%20web%20alojada%20en%20un%20servidor%20%28que%20NO%20utilizaremos%20para%20nada%20durante%20el%20desarrollo%29,%20y%20en%20nuestra%20m%c3%a1quina%20local%20tendremos%20una%20m%c3%a1quina%20virtual%20para%20el%20sitio%20web%20en%20el%20que%20estemos%20trabajando.%20Para%20la%20m%c3%a1quina%20virtual%20utilizaremos%20vagrant%20con%20el%20stack%20de%20%3ca%20href=%22https://box.scotch.io/%22%3escotch%3c/a%3e,%20que%20nos%20viene%20preparado%20para%20montar%20directamente%20el%20sitio%20web%20sin%20trabajo%20extra.%3c/p%3e%0a%0a%3ch2%20id=%22requisitos-previos%22%3eRequisitos%20previos%3c/h2%3e%0a%0a%3cp%3eUsaremos%20las%20siguientes%20tecnolog%c3%adas.%20Deber%c3%adas%20revisarlas%20antes%20de%20seguir%20con%20el%20art%c3%adculo.%3c/p%3e%0a%0a%3cp%3e%3c/p%3e" onclick="window.open(this.href, 'windowName', 'width=550, height=600, left=24, top=24, scrollbars, resizable'); return false" rel="nofollow" target="_blank"></a>
    </li>
  </ul>
</div>

    </div>

    <div class='post-footer'>
      
       <div id="disqus_thread"></div>
<script>





var disqus_shortname = 'jarboleda-me';
(function() { 
var d = document, s = d.createElement('script');
s.src = 'https://jarboleda-me.disqus.com/embed.js';
s.async = true; 
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>

     
    </div>
  </div>
</div>

      </article>
    </section><aside class='sidebar-wrapper pure-u-1 pure-u-md-1-4 sticky'>
      
<div class='sidebar'>
  

<div class='authorboxwrap'>
<h4>Author</h4>
    <div class='avatar-container'>
      <img alt="author's photo" class='author_avatar' height='96' src="/img/me.png" width='96' />
      <h4 rel='author'>Jeferson Arboleda</h4>
    </div>
    <div class='author_description_container'>
      <p>Buscando un desafío :) | Actualmente estoy interesdo en <a href="https://docker.com">Docker</a>, <a href="https://kubernetes.io/">kubernetes</a>, e <a href="https://www.ibm.com/cloud-computing/bluemix/">IBM bluemix</a></p>
      <div class='authorsocial'>
        
          <a href='https://www.linkedin.com/in/167429134' target='_blank'><i class='fa fa-linkedin'></i></a>
        
        
          <a href='https://github.com/jag10' target='_blank'><i class='fa fa-github'></i></a>
        
        
          <a href='https://gitlab.com/jag7' target='_blank'><i class='fa fa-gitlab'></i></a>
        
        
          <a href='https://twitter.com/j_a_g_x' target='_blank'><i class='fa fa-twitter'></i></a>
        
      </div>
    </div>
</div>

  
  <h4>On This Page</h4>
  <div class='table_of_contents'>
    <nav id="TableOfContents">
<ul>
<li>
<ul>
<li><a href="#requisitos-previos">Requisitos previos</a></li>
<li><a href="#instalando-vagrant">Instalando vagrant</a></li>
<li><a href="#estructura-de-directorios">Estructura de directorios</a></li>
<li><a href="#automatizando-tareas">Automatizando tareas</a></li>
<li><a href="#aclaraciones">Aclaraciones</a></li>
</ul></li>
</ul>
</nav>
  </div>
  
</div>


    </aside>
    <div class='clearfix'></div>
  </div>
  <footer>
  <div class='footer-container'>
    <div class='pure-u-1 pure-u-md-1-3'>
      <div class='widget popular-posts'>
        <div class="widget-title">
          <h2>Other posts</h2></div>
        <div class='widget-content popular-posts'>
          <ul>
            
             
            <li>
              <div class='item-content'>
                <div class='item-thumbnail'>
                  <a href='/es/articles/backing-up-all-databases-using-mysqldump/' target='_blank'>
                    <img alt='Haciendo un backup de todas las BD usando mysqldump' width='72' height='72' src="/articles/img/thumbs/backing-up-all-databases-using-mysqldump.png" />
                  </a>
                </div>
                <div class='item-title'>
                  <a href='/es/articles/backing-up-all-databases-using-mysqldump/' class="mostVisitedLink">Haciendo un backup de todas las BD usando mysqldump</a>
                </div>
              </div>
            </li>
            
            
             
            <li>
              <div class='item-content'>
                <div class='item-thumbnail'>
                  <a href='/es/articles/installing-magento2-on-cwp/' target='_blank'>
                    <img alt='Instalando magento2 en cwp' width='72' height='72' src="/articles/img/thumbs/installing-magento2-on-cwp.jpg" />
                  </a>
                </div>
                <div class='item-title'>
                  <a href='/es/articles/installing-magento2-on-cwp/' class="mostVisitedLink">Instalando magento2 en cwp</a>
                </div>
              </div>
            </li>
            
            
             
            <li>
              <div class='item-content'>
                <div class='item-thumbnail'>
                  <a href='/es/articles/getting-an-objects-methods/' target='_blank'>
                    <img alt='Obteniendo los métodos (reflejados) de un objeto' width='72' height='72' src="/articles/img/thumbs/getting-an-objects-methods.jpg" />
                  </a>
                </div>
                <div class='item-title'>
                  <a href='/es/articles/getting-an-objects-methods/' class="mostVisitedLink">Obteniendo los métodos (reflejados) de un objeto</a>
                </div>
              </div>
            </li>
            
            
          </ul>
        </div>
      </div>
    </div>
    <div class='pure-u-1 pure-u-md-1-3'>
      <div class='widget ContactForm'>
        <h2 class='title'>Contact me</h2>
        <a class="email" href="mailto:me@jarboleda.me">me@jarboleda.me</a>
        <div class='contact-form-widget'>
          <div class='form'>
            <form name='contact-form' action="https://formspree.io/me@jarboleda.me" method="POST">
              <p>Name</p>
              <input class='contact-form-name' name='name' size='30' type='text' value='' />
              <p>Email<span>*</span></p>
              <input class='contact-form-email' name='name="_replyto"' size='30' type='text' value='' />
              <p>Message<span>*</span></p>
              <p><textarea class='contact-form-email-message' cols='29' name='email-message' rows='5'></textarea></p>
              <input class='contact-form-button contact-form-button-submit' type='submit' value='Send' />
              <div style='text-align: center; max-width: 222px; width: 100%'>
                <p class='contact-form-error-message'></p>
                <p class='contact-form-success-message'></p>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>
  
  <div class='footer-credits'>
    <div class='footer_social-icons'>
      <ul>
        
        <li>
          <a class="btn-linkedin" href='https://www.linkedin.com/in/167429134' target='_blank'><i class='fa fa-linkedin'></i></a>
        </li>
        
        
        <li>
          <a class="btn-github" href='https://github.com/jag10' target='_blank'><i class='fa fa-github'></i></a>
        </li>
        
        
        <li>
          <a class="btn-gitlab" href='https://gitlab.com/jag7' target='_blank'><i class='fa fa-gitlab'></i></a>
        </li>
        
        
        <li>
          <a class="btn-twitter" href='https://twitter.com/j_a_g_x' target='_blank'><i class='fa fa-twitter'></i></a>
        </li>
        
      </ul>
    </div>
    <div class='clr'></div>
    <p>Copyright &#169; 2017
      <a href='https://www.jarboleda.me'>https://www.jarboleda.me</a>
    </p>
    <p class='attribution'>Powered by</p>
    <a href='https://gohugo.io/' target="_blank" >
      <img alt="hugo logo" class='attribution_logo' src="/img/hugo-logo.png" />
    </a>
  </div>
</footer>

<script defer src='/js/main.min.js' type='text/javascript'></script>

<script type="text/javascript">
  window.cookieconsent_options = {
    "message": "This website uses cookies to ensure you get the best experience on our website",
    "dismiss": "Got it!",
    "learnMore": "More info",
    "link": null,
    "theme": "light-bottom"
  };
</script>
<script defer type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/1.0.10/cookieconsent.min.js"></script>

</body>
</html>

