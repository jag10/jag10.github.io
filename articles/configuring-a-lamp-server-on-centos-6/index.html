
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta content='text/html; charset=UTF-8' http-equiv='Content-Type' />
    <meta name=viewport content="width=device-width, initial-scale=1">
    <title>J. Arboleda - configuring a LAMP server on CentOS 6</title>
    <meta name="description" content="The blog of Jeferson Arboleda, software engineer. It&#39;s focused on self improvement and overcoming challenges I find everyday">
    
    
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/manifest.json">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="theme-color" content="#ffffff">
    	
	<meta property="og:title" content="configuring a LAMP server on CentOS 6" />
	<meta property="og:description" content="In this first post I&rsquo;ll explain how I configurated my VPS to run a basic LAMP server with multiple php versions, compiled by myself. You can get your own cheap VPS (~3€) and test a lot of things.

Dir structure

Firstly, we&rsquo;ll create our dir structure. I&rsquo;ll use jag.co as a domain for this example, you can choose the dir structure you want, but I recommend following this one:
" />
	<meta property="og:type" content="website" />
	<meta property="og:url" content="https://www.jarboleda.me/articles/configuring-a-lamp-server-on-centos-6/" />
	<meta property="og:image" content="https://www.jarboleda.me/articles/img/configuring-a-lamp-server-on-centos-6.jpg" />
	<meta property="og:updated_time" content="2015-08-09 10:48:45 &#43;0200 CEST"/>
	<meta property="og:locale" content="en-US" />
	<meta property="og:site_name" content="J. Arboleda" />
	
	
	<meta property="article:published_time" content="2015-08-09 10:48:45 &#43;0200 CEST" />
	<meta property="article:modified_time" content="2015-08-09 10:48:45 &#43;0200 CEST" />
	<meta property="article:section" content="articles" />
	<meta property="article:tag" content="httpd" />
	<meta property="article:tag" content="mysql" />
	<meta property="article:tag" content="php" />
	<meta property="article:tag" content="centos6" />
	
	
    
    <meta itemprop="name" content="configuring a LAMP server on CentOS 6">
    <meta itemprop="description" content="In this first post I&rsquo;ll explain how I configurated my VPS to run a basic LAMP server with multiple php versions, compiled by myself. You can get your own cheap VPS (~3€) and test a lot of things.

Dir structure

Firstly, we&rsquo;ll create our dir structure. I&rsquo;ll use jag.co as a domain for this example, you can choose the dir structure you want, but I recommend following this one:
">
    <meta name="author" content="Jeferson Arboleda">
    
    <meta itemprop="image" content="configuring-a-lamp-server-on-centos-6.jpg">
    
    <meta itemprop="keywords" content="notpinned,pinned,,true,serie1,arduino,backup,backups,bash,case,centos6,curl,cwp,facebook,fail2ban,fedora25,fopen,ftp,httpd,iptables,ipv6,lego,magento,magento2,mate,mysql,mysqldump,nodejs,odroid,performance,php,php7,piwik,plesk,processwire,reflectionmethod,sass,ubuntu,unrealengine,vagrant,vm,vps,zip," />
    <meta itemprop="wordCount" content="1291">
	
	<meta name="twitter:card" content="summary_large_image"/>
	<meta name="twitter:image:src" content="https://www.jarboleda.me/articles/img/configuring-a-lamp-server-on-centos-6.jpg"/>
	
	<meta name="twitter:title" content="configuring a LAMP server on CentOS 6"/>
	<meta name="twitter:description" content="In this first post I&rsquo;ll explain how I configurated my VPS to run a basic LAMP server with multiple php versions, compiled by myself. You can get your own cheap VPS (~3€) and test a lot of things.

Dir structure

Firstly, we&rsquo;ll create our dir structure. I&rsquo;ll use jag.co as a domain for this example, you can choose the dir structure you want, but I recommend following this one:
"/>
	<meta name="twitter:site" content="@j_a_g_x"/>
	
	<meta name="twitter:creator" content="@j_a_g_x"/>


	<meta name="news_keywords" content="httpd,mysql,php,centos6" />

    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">
    <link href="/css/global.min.css" media="screen" rel="stylesheet" type="text/css" />
  </head>
 <body>
  <header>
    <nav class='top-menu'>
      
      <div class="menu-wrapper" id="menu">
        <div class="pure-u-1 hidden">
          <div class="pure-menu menu-toogle-container">
            <a class="custom-toggle" id="toggle"><span class="bar"></span><span class="bar"></span></a>
          </div>
        </div>
        <div class="pure-u-1">
          <div class="pure-menu pure-menu-horizontal custom-can-transform">
            <ul class="pure-menu-list float-left">
              
              <li class="pure-menu-item"><a class='pure-menu-link' href=/>home</a></li>
              
              <li class="pure-menu-item"><a class='pure-menu-link' href=/extras/cv/>about me</a></li>
              
              <li class="pure-menu-item"><a class='pure-menu-link' href=/projects/>projects</a></li>
              
              <li class="pure-menu-item"><a class='pure-menu-link' href=https://github.com/jag10>github</a></li>
              
              <li class="pure-menu-item"><a class='pure-menu-link' href=https://gitlab.com/jag7>gitlab</a></li>
              
              <li class='pure-menu-item lang_selector selected'>
                
                <a class='pure-menu-link' href="#">English</a>
                
              </li>
              <li class='pure-menu-item flag'><i class='fa fa-language' aria-hidden='true'></i></li>
               
              <li class='pure-menu-item lang_selector'>
                <a class='pure-menu-link' href="/es/articles/configuring-a-lamp-server-on-centos-6/">spanish </a>
              </li>
               
            </ul>
            <div class="float-right">
              <ul class="pure-menu-list">
                
                <li class="pure-menu-item social_menu_entry">
                  <a href='https://www.linkedin.com/in/jeferson-arboleda-167429134' target='_blank'><i class='fa fa-linkedin'></i></a>
                </li>
                
                
                <li class="pure-menu-item social_menu_entry">
                  <a href='https://github.com/jag10' target='_blank'><i class='fa fa-github'></i></a>
                </li>
                
                
                <li class="pure-menu-item social_menu_entry">
                  <a href='https://gitlab.com/jag7' target='_blank'><i class='fa fa-gitlab'></i></a>
                </li>
                
                
                <li class="pure-menu-item social_menu_entry">
                  <a href='https://twitter.com/j_a_g_x' target='_blank'><i class='fa fa-twitter'></i></a>
                </li>
                
                <li class='pure-menu-item nt-search' id='nt-search'>
                  <form action='/search/' id='searchform' method='get'>
                    <div class='nt-search-input-wrap'>
                      <input class='nt-search-input' id='s' name='q' placeholder='Search is disabled :(' type='text' value='' disabled />
                    </div>
                    <input class='nt-search-submit' id='go' type='submit' value='Search' />
                    <span class='nt fa fa-search'></span>
                  </form>
                </li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </nav>
    
    
  </header>

  <div class="main-container">
    <section id="main" class="pure-u-1 pure-u-md-3-4">
      <article>
        <div class="post-container">
  
  <div class="article_summary">
    <div class="article-date">
      <p class="day"><i class="fa fa-calendar"></i>9 Aug 2015</p>
      <p><i class="fa fa-clock-o"></i>8 min read  ~ 1300 words</p>
    </div>
    
    <div class="article-tags">
      
      <a href="#" rel="tag">httpd</a> 
      <a href="#" rel="tag">mysql</a> 
      <a href="#" rel="tag">php</a> 
      <a href="#" rel="tag">centos6</a> 
    </div>
    
    <div class="clearfix"></div>
    
    <h1 class="article_title title">configuring a LAMP server on CentOS 6</h1>
    
    <div class="article_excerpt">
      
      <p><p>In this first post I&rsquo;ll explain how I configurated my VPS to run a basic LAMP server with multiple php versions, compiled by myself. You can get your own cheap VPS (~3€) and test a lot of things.</p>

<h2 id="dir-structure">Dir structure</h2>

<p>Firstly, we&rsquo;ll create our dir structure. I&rsquo;ll use jag.co as a domain for this example, you can choose the dir structure you want, but I recommend following this one:
</p>

<div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span></span><span style="color: #a6e22e">/</span>
<span style="color: #a6e22e">/var/www/vhosts/jag.co</span>
<span style="color: #a6e22e">/var/www/vhosts/jag.co/logs</span>
<span style="color: #a6e22e">/var/www/vhosts/jag.co/httpdocs</span>
</pre></div>


<p>We&rsquo;ll also create a system user who will be running php, although at first we&rsquo;ll run php under apache, just to test our configuration. You can create this dir structure and the system user with the following commands:
<div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span></span>mkdir -p /var/www/vhosts/jag.co
useradd -d /var/www/vhosts/jag.co/ jag
usermod -g apache jag
chmod <span style="color: #ae81ff">710</span> /var/www/vhosts/jag.co
</pre></div>
</p>

<p>Now we&rsquo;ll add an important repository to our system. We&rsquo;ll need it here and you&rsquo;ll need it later, for sure. After that, we are good to perform a basic httpd install, along with php.
<div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span></span>yum install epel-release
yum install httpd
yum install mod_fcgid
yum install php
</pre></div>
</p>

<p>You should be able to test the default page of apache, visiting your vps ip through your preferred browser. But that&rsquo;s too uncomfortable, so we&rsquo;ll improve it. We are going to configure a virtual host, named jag.co. First, we need to activate virtual hosts. To do that, we&rsquo;re going to edit the main httpd configuration file (/etc/httpd/conf/httpd.conf) and add/uncomment the following line:
<div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span></span>NameVirtualHost *:80
</pre></div>
</p>

<p>Secondly, we&rsquo;re going to create and edit the file /etc/httpd/conf.d/jag.co.conf and include the following content:</p>

<div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span></span><span style="color: #f8f8f2">LoadModule</span> suexec_module    lib/apache/mod_suexec.so
<span style="color: #f92672">&lt;VirtualHost</span> <span style="color: #e6db74">*:80</span><span style="color: #f92672">&gt;</span>
    <span style="color: #f8f8f2">ServerName</span> jag.co
    <span style="color: #f8f8f2">DocumentRoot</span> <span style="color: #e6db74">/var/www/vhosts/jag.co/httpdocs</span>
    <span style="color: #f8f8f2">ServerAdmin</span> hostmaster@jag.co

    <span style="color: #f8f8f2">ErrorLog</span> <span style="color: #e6db74">/var/www/vhosts/jag.co/logs/error.log</span>
    <span style="color: #f8f8f2">CustomLog</span> <span style="color: #e6db74">/var/www/vhosts/jag.co/logs/access.log</span> combined

    <span style="color: #f8f8f2">SuexecUserGroup</span> jag jag
    <span style="color: #f8f8f2">ScriptAlias</span> <span style="color: #e6db74">/cgi-bin/</span> <span style="color: #e6db74">&quot;/var/www/vhosts/jag.co/.cgi-bin/&quot;</span>

    <span style="color: #f92672">&lt;Directory</span> <span style="color: #e6db74">&quot;/var/www/vhosts/jag.co/.cgi-bin/&quot;</span><span style="color: #f92672">&gt;</span>
        <span style="color: #f8f8f2">AllowOverride</span> <span style="color: #66d9ef">None</span>
        <span style="color: #f8f8f2">Order</span> allow,deny
        <span style="color: #f8f8f2">Allow</span> from <span style="color: #66d9ef">all</span>
    <span style="color: #f92672">&lt;/Directory&gt;</span>

    <span style="color: #f92672">&lt;Directory</span> <span style="color: #e6db74">&quot;/var/www/vhosts/jag.co/httpdocs&quot;</span><span style="color: #f92672">&gt;</span>
        <span style="color: #f8f8f2">Options</span> Indexes Includes FollowSymLinks
        <span style="color: #f8f8f2">AllowOverride</span> <span style="color: #66d9ef">All</span>
        <span style="color: #75715e">#mod_php executes all php by default, so we need to use the Filesmatch directive to tell apache we want to execute php with our own cgi-bin.</span>
        <span style="color: #f92672">&lt;FilesMatch</span> <span style="color: #e6db74">&quot;.+\.ph(p[345]?|t|tml)$&quot;</span><span style="color: #f92672">&gt;</span>
            <span style="color: #f8f8f2">SetHandler</span> php5-fastcgi
            <span style="color: #f8f8f2">Action</span> php5-fastcgi <span style="color: #e6db74">/cgi-bin/php.fcgi</span>
        <span style="color: #f92672">&lt;/FilesMatch&gt;</span>
        <span style="color: #f8f8f2">Order</span> allow,deny
        <span style="color: #f8f8f2">Allow</span> from <span style="color: #66d9ef">all</span>
    <span style="color: #f92672">&lt;/Directory&gt;</span>
	<span style="color: #75715e">#allow 20M request, just to manage files</span>
    <span style="color: #f8f8f2">FcgidMaxRequestLen</span> <span style="color: #ae81ff">20000000</span>

<span style="color: #f92672">&lt;/VirtualHost&gt;</span>
</pre></div>


<p>Here we&rsquo;re telling apache some basic directives to use with our virtualhost, like error logs (remember to create these files and set their permissions correctly) or how to execute php files. To execute php we&rsquo;ll be using suexec_mod, which allow us to execute php under different users, thus improving security between virtual hosts. By default, mod_php will take all our php files and execute them under apache user. So if we don&rsquo;t want that to happen under our virtualhost, we&rsquo;ll use the directive SetHandler to change that. This way, we&rsquo;re telling apache to execute .php files with an script we&rsquo;ll create later.
Now, we need to create log files:
<div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span></span><span style="color: #f8f8f2">mkdir</span> -p <span style="color: #e6db74">/var/www/vhosts/jag.co/logs/</span>
<span style="color: #f8f8f2">touch</span> <span style="color: #e6db74">/var/www/vhosts/jag.co/logs/error.log</span>
<span style="color: #f8f8f2">touch</span> <span style="color: #e6db74">/var/www/vhosts/jag.co/logs/access.log</span>
</pre></div>
</p>

<p>In next step we&rsquo;ll create an script which will take care of php files, setting some environment variables and executing php. Create and edit the following file: /var/www/vhosts/jag.co/.cgi-bin/php.fcgi
<div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span></span><span style="color: #75715e">#!/bin/bash</span>
<span style="color: #75715e">#</span>
<span style="color: #75715e"># php5.fcgi</span>
<span style="color: #75715e"># Shell Script to run PHP5 using mod_fastcgi under Apache 2.x</span>
<span style="color: #f8f8f2">USER</span><span style="color: #f92672">=</span><span style="color: #e6db74">&quot;jag&quot;</span>
<span style="color: #f8f8f2">PHPRC</span><span style="color: #f92672">=</span><span style="color: #e6db74">&quot;/var/www/vhosts/jag.co/.cgi-bin/php.ini&quot;</span>
<span style="color: #f8f8f2">PHP_FCGI_CHILDREN</span><span style="color: #f92672">=</span>5
<span style="color: #f8f8f2">export</span> PHP_FCGI_CHILDREN
<span style="color: #f8f8f2">exec</span> /usr/bin/php-cgi
</pre></div>
</p>

<p>In this script we&rsquo;re executing exactly the same php version mod_php would use, but later we&rsquo;ll change that. Now you can set a customized php.ini for this virtual host. Also, remember to set permissions and ownership.</p>

<div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span></span>cp -fv /etc/php/cgi/php.ini /var/www/vhosts/jag.co/.cgi-bin/
chown -R jag:apache /var/www/vhosts/jag.co/
chown -R jag:jag .cgi-bin
</pre></div>


<p>You should add the open_basedir directive to your php.ini, so users can&rsquo;t touch others users&rsquo; files. Also, add the /tmp dir to this directive, you&rsquo;ll need it if you want to upload files to your website ith your browser.
<div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span></span><span style="color: #f8f8f2">open_basedir</span> <span style="color: #f92672">=</span> /var/www/vhosts/jag.co/httpdocs/:/tmp
</pre></div>

Ok, you should be good to go. You can upload some php file and try to get it through your browser and see what happens. I recommend putting some phpinfo() function inside to get details about your php installation. You&rsquo;ll notice it&rsquo;s running under your user and not under apache.</p>

<h2 id="installing-additional-php-versions">Installing additional PHP versions</h2>

<p>Ok, sooner or later you&rsquo;ll find a client of yours or maybe yourself need an older/newer php version, so let&rsquo;s take care of that before it happens. Firstly, we need to choose an additional php version and download it. I&rsquo;ll choose 5.6.10 and will work from /script directory. You can choose any directory, this won&rsquo;t affect at all.
After downloading it, we&rsquo;ll install some tools we&rsquo;ll need to compile php.
<div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span></span>mkdir /script
<span style="color: #f8f8f2">cd</span> /script
wget http://us1.php.net/get/php-5.6.10.tar.gz/from/this/mirror
tar -zxvf mirror
yum install libxml2-devel libXpm-devel gmp-devel libicu-devel t1lib-devel aspell-devel openssl-devel bzip2-devel libcurl-devel libjpeg-devel libvpx-devel libpng-devel freetype-devel readline-devel libtidy-devel libxslt-devel libmcrypt-devel pcre-devel curl-devel mysql-devel ncurses-devel gettext-devel net-snmp-devel libevent-devel libtool-ltdl-devel libc-client-devel postgresql-devel
yum groupinstall <span style="color: #e6db74">&#39;Development Tools&#39;</span>
</pre></div>
</p>

<p>Ok, time to configure our php install. You should think about what needs you have and find out which libraries you&rsquo;ll need in your php instalation. I&rsquo;ve used this one, you should be able to go with it. Also, it&rsquo;s pretty straight forward to change this in future, so don&rsquo;t worry a lot about it. After configuring it, we&rsquo;ll install it. This will be an slow process, so sit and wait patiently.
<div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span></span>./configure --prefix<span style="color: #f92672">=</span>/usr/bin/php56 --with-config-file-path<span style="color: #f92672">=</span>/etc/php56 --with-config-file-scan-dir<span style="color: #f92672">=</span>/etc/php56/php.d --with-libdir<span style="color: #f92672">=</span>lib64 --with-mysql --with-mysqli --enable-mbstring --disable-debug --disable-rpath --with-bz2 --with-curl --with-gettext --with-iconv --with-openssl --with-gd --with-mcrypt --with-pcre-regex --with-zlib --enable-cgi --enable-pdo<span style="color: #f92672">=</span>shared --with-pdo-mysql<span style="color: #f92672">=</span>shared --with-pdo-sqlite<span style="color: #f92672">=</span>shared --enable-zip --with-jpeg-dir<span style="color: #f92672">=</span>/usr/lib64 --with-freetype-dir<span style="color: #f92672">=</span>/usr/ --enable-gd-native-ttf

make
make <span style="color: #f8f8f2">test</span>
make install
</pre></div>
</p>

<p>Ok, now you can copy your new php.ini
<div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span></span>cp php.ini-production /etc/php56/php.ini
vim /etc/php56/php.ini
<span style="color: #75715e">#add this</span>
cgi.fix_pathinfo <span style="color: #f92672">=</span> 1
</pre></div>
</p>

<p>Remember the script we wrote to execute php files? Ok, now it&rsquo;s the time to tell that script to execute php files with our new php install. We&rsquo;ll need to change the exec line, like this:
<div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span></span><span style="color: #f8f8f2">exec</span> /usr/bin/php56/bin/php-cgi
</pre></div>
</p>

<p>Now you can repeat this operation as many times as you want, and you&rsquo;ll have different php versions, choosing which one you want to use with each virtual host. Also, you can configure and install php again with other params, overwriting the old configuration with no problems.</p>

<h2 id="troubleshooting">Troubleshooting</h2>

<p>If you have trouble, I recommend to check log files, specially apache and suexec log. This last file will tell you if there are some wrong set permissions.</p>

<h2 id="installing-mysql-and-phpmyadmin">Installing mysql and phpmyadmin</h2>

<p>Installing mysql and phpmyadmin is easy, just type in the following commands and follow the instructions on screen:
<div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span></span>yum install mysql-server
service mysqld start
mysql_secure_installation
</pre></div>
</p>

<p>You should limit the access to phpmyadmin, so I recommend adding this to /etc/httpd/conf.d/phpMyAdmin.conf. Just change x.x.x.x for your ip. This way, only you can connect to phpmyadmin
<div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span></span><span style="color: #75715e"># phpMyAdmin - Web based MySQL browser written in php</span>
<span style="color: #75715e">#</span>
<span style="color: #75715e"># Allows only localhost by default</span>
<span style="color: #75715e">#</span>
<span style="color: #75715e"># But allowing phpMyAdmin to anyone other than localhost should be considered</span>
<span style="color: #75715e"># dangerous unless properly secured by SSL</span>

<span style="color: #f8f8f2">Alias</span> <span style="color: #e6db74">/phpMyAdmin</span> <span style="color: #e6db74">/usr/share/phpMyAdmin</span>
<span style="color: #f8f8f2">Alias</span> <span style="color: #e6db74">/phpmyadmin</span> <span style="color: #e6db74">/usr/share/phpMyAdmin</span>

<span style="color: #f92672">&lt;Directory</span> <span style="color: #e6db74">/usr/share/phpMyAdmin/</span><span style="color: #f92672">&gt;</span>
   <span style="color: #f8f8f2">AddDefaultCharset</span> UTF-8

   <span style="color: #f92672">&lt;IfModule</span> <span style="color: #e6db74">mod_authz_core.c</span><span style="color: #f92672">&gt;</span>
     <span style="color: #75715e"># Apache 2.4</span>
     <span style="color: #f92672">&lt;RequireAny&gt;</span>
       <span style="color: #f8f8f2">Require</span> ip <span style="color: #ae81ff">127.0.0.1</span>
       <span style="color: #f8f8f2">Require</span> ip ::1
       <span style="color: #f8f8f2">Require</span> x.x.x.x
     <span style="color: #f92672">&lt;/RequireAny&gt;</span>
   <span style="color: #f92672">&lt;/IfModule&gt;</span>
   <span style="color: #f92672">&lt;IfModule</span> <span style="color: #e6db74">!mod_authz_core.c</span><span style="color: #f92672">&gt;</span>
     <span style="color: #75715e"># Apache 2.2</span>
     <span style="color: #f8f8f2">Order</span> Deny,Allow
     <span style="color: #f8f8f2">Deny</span> from <span style="color: #66d9ef">All</span>
     <span style="color: #f8f8f2">Allow</span> from <span style="color: #ae81ff">127.0.0.1</span>
     <span style="color: #f8f8f2">Allow</span> from ::1
     <span style="color: #f8f8f2">Allow</span> from x.x.x.x
   <span style="color: #f92672">&lt;/IfModule&gt;</span>
<span style="color: #f92672">&lt;/Directory&gt;</span>

<span style="color: #f92672">&lt;Directory</span> <span style="color: #e6db74">/usr/share/phpMyAdmin/setup/</span><span style="color: #f92672">&gt;</span>
   <span style="color: #f92672">&lt;IfModule</span> <span style="color: #e6db74">mod_authz_core.c</span><span style="color: #f92672">&gt;</span>
     <span style="color: #75715e"># Apache 2.4</span>
     <span style="color: #f92672">&lt;RequireAny&gt;</span>
       <span style="color: #f8f8f2">Require</span> ip <span style="color: #ae81ff">127.0.0.1</span>
       <span style="color: #f8f8f2">Require</span> ip ::1
       <span style="color: #f8f8f2">Require</span> x.x.x.x
     <span style="color: #f92672">&lt;/RequireAny&gt;</span>
   <span style="color: #f92672">&lt;/IfModule&gt;</span>
   <span style="color: #f92672">&lt;IfModule</span> <span style="color: #e6db74">!mod_authz_core.c</span><span style="color: #f92672">&gt;</span>
     <span style="color: #75715e"># Apache 2.2</span>
     <span style="color: #f8f8f2">Order</span> Deny,Allow
     <span style="color: #f8f8f2">Deny</span> from <span style="color: #66d9ef">All</span>
     <span style="color: #f8f8f2">Allow</span> from <span style="color: #ae81ff">127.0.0.1</span>
     <span style="color: #f8f8f2">Allow</span> from ::1
     <span style="color: #f8f8f2">Allow</span> from x.x.x.x
   <span style="color: #f92672">&lt;/IfModule&gt;</span>
<span style="color: #f92672">&lt;/Directory&gt;</span>

<span style="color: #75715e"># These directories do not require access over HTTP - taken from the original</span>
<span style="color: #75715e"># phpMyAdmin upstream tarball</span>
<span style="color: #75715e">#</span>
<span style="color: #f92672">&lt;Directory</span> <span style="color: #e6db74">/usr/share/phpMyAdmin/libraries/</span><span style="color: #f92672">&gt;</span>
    <span style="color: #f8f8f2">Order</span> Deny,Allow
    <span style="color: #f8f8f2">Deny</span> from <span style="color: #66d9ef">All</span>
    <span style="color: #f8f8f2">Allow</span> from <span style="color: #66d9ef">None</span>
<span style="color: #f92672">&lt;/Directory&gt;</span>

<span style="color: #f92672">&lt;Directory</span> <span style="color: #e6db74">/usr/share/phpMyAdmin/setup/lib/</span><span style="color: #f92672">&gt;</span>
    <span style="color: #f8f8f2">Order</span> Deny,Allow
    <span style="color: #f8f8f2">Deny</span> from <span style="color: #66d9ef">All</span>
    <span style="color: #f8f8f2">Allow</span> from <span style="color: #66d9ef">None</span>
<span style="color: #f92672">&lt;/Directory&gt;</span>

<span style="color: #f92672">&lt;Directory</span> <span style="color: #e6db74">/usr/share/phpMyAdmin/setup/frames/</span><span style="color: #f92672">&gt;</span>
    <span style="color: #f8f8f2">Order</span> Deny,Allow
    <span style="color: #f8f8f2">Deny</span> from <span style="color: #66d9ef">All</span>
    <span style="color: #f8f8f2">Allow</span> from <span style="color: #66d9ef">None</span>
<span style="color: #f92672">&lt;/Directory&gt;</span>

<span style="color: #75715e"># This configuration prevents mod_security at phpMyAdmin directories from</span>
<span style="color: #75715e"># filtering SQL etc.  This may break your mod_security implementation.</span>
<span style="color: #75715e">#</span>
<span style="color: #75715e">#&lt;IfModule mod_security.c&gt;</span>
<span style="color: #75715e">#    &lt;Directory /usr/share/phpMyAdmin/&gt;</span>
<span style="color: #75715e">#        SecRuleInheritance Off</span>
<span style="color: #75715e">#    &lt;/Directory&gt;</span>
<span style="color: #75715e">#&lt;/IfModule&gt;</span>
</pre></div>
</p>

<p>Finally, you should auto start apache and mysql, just in case you need to reboot your server. Use the following commands to achieve this
<div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span></span>chkconfig httpd on
chkconfig mysqld on
</pre></div>
</p></p>
      
    </div>
    <div class="clearfix"></div>
    
    <div class="article_resources">
      <h2>Resources</h2>
      <ul>
        
        <li>
          
          <a target="_blank" href="https://www.linux.com/learn/easy-lamp-server-installation">LAMP server on linux.com</a> 
        </li>
        
      </ul>
    </div>
    
    <div class="article-footer">
      
      




<div class="soc-sharing">
  <ul class="article_share_items">
    <li>
      <a class="fa fa-linkedin" href="http://www.linkedin.com/shareArticle?mini=true&amp;url=https://www.jarboleda.me/articles/configuring-a-lamp-server-on-centos-6/&amp;title=configuring%20a%20LAMP%20server%20on%20CentOS%206&amp;summary=%3cp%3eIn%20this%20first%20post%20I&amp;rsquo;ll%20explain%20how%20I%20configurated%20my%20VPS%20to%20run%20a%20basic%20LAMP%20server%20with%20multiple%20php%20versions,%20compiled%20by%20myself.%20You%20can%20get%20your%20own%20cheap%20VPS%20%28~3%e2%82%ac%29%20and%20test%20a%20lot%20of%20things.%3c/p%3e%0a%0a%3ch2%20id=%22dir-structure%22%3eDir%20structure%3c/h2%3e%0a%0a%3cp%3eFirstly,%20we&amp;rsquo;ll%20create%20our%20dir%20structure.%20I&amp;rsquo;ll%20use%20jag.co%20as%20a%20domain%20for%20this%20example,%20you%20can%20choose%20the%20dir%20structure%20you%20want,%20but%20I%20recommend%20following%20this%20one:%0a%3c/p%3e&amp;source=J.%20Arboleda" onclick="window.open(this.href, 'windowName', 'width=550, height=600, left=24, top=24, scrollbars, resizable'); return false" rel="nofollow" target="_blank"></a>
    </li>
    <li>
      <a class="fa fa-twitter" href="http://twitter.com/share?text=configuring%20a%20LAMP%20server%20on%20CentOS%206&amp;url=https://www.jarboleda.me/articles/configuring-a-lamp-server-on-centos-6/" onclick="window.open(this.href, 'windowName', 'width=550, height=600, left=24, top=24, scrollbars, resizable'); return false" rel="nofollow" target="_blank"></a>
    </li>
    <li>
      <a class="fa fa-facebook" href="https://www.facebook.com/sharer/sharer.php?u=https://www.jarboleda.me/articles/configuring-a-lamp-server-on-centos-6/" onclick="window.open(this.href, 'windowName', 'width=550, height=600, left=24, top=24, scrollbars, resizable'); return false" rel="nofollow" target="_blank"></a>
    </li>
    <li>
      <a class="fa fa-google-plus" href="https://plus.google.com/share?url=https://www.jarboleda.me/articles/configuring-a-lamp-server-on-centos-6/" onclick="window.open(this.href, 'windowName', 'width=550, height=600, left=24, top=24, scrollbars, resizable'); return false" rel="nofollow" target="_blank"></a>
    </li>
    <li>
      <a class="fa fa-pinterest" href="https://pinterest.com/pin/create/button/?url=https://www.jarboleda.me/articles/configuring-a-lamp-server-on-centos-6/&amp;media=https://www.jarboleda.meconfiguring-a-lamp-server-on-centos-6.jpg&amp;description=%3cp%3eIn%20this%20first%20post%20I&amp;rsquo;ll%20explain%20how%20I%20configurated%20my%20VPS%20to%20run%20a%20basic%20LAMP%20server%20with%20multiple%20php%20versions,%20compiled%20by%20myself.%20You%20can%20get%20your%20own%20cheap%20VPS%20%28~3%e2%82%ac%29%20and%20test%20a%20lot%20of%20things.%3c/p%3e%0a%0a%3ch2%20id=%22dir-structure%22%3eDir%20structure%3c/h2%3e%0a%0a%3cp%3eFirstly,%20we&amp;rsquo;ll%20create%20our%20dir%20structure.%20I&amp;rsquo;ll%20use%20jag.co%20as%20a%20domain%20for%20this%20example,%20you%20can%20choose%20the%20dir%20structure%20you%20want,%20but%20I%20recommend%20following%20this%20one:%0a%3c/p%3e" onclick="window.open(this.href, 'windowName', 'width=550, height=600, left=24, top=24, scrollbars, resizable'); return false" rel="nofollow" target="_blank"></a>
    </li>
  </ul>
</div>

    </div>

    <div class='post-footer'>
      
       <div id="disqus_thread"></div>
<script>





var disqus_shortname = 'jarboleda-me';
(function() { 
var d = document, s = d.createElement('script');
s.src = 'https://jarboleda-me.disqus.com/embed.js';
s.async = true; 
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>

     
    </div>
  </div>
</div>

      </article>
    </section><aside class='sidebar-wrapper pure-u-1 pure-u-md-1-4 sticky'>
      
<div class='sidebar'>
  

<div class='authorboxwrap'>
<h4>Author</h4>
    <div class='avatar-container'>
      <img alt="author's photo" class='author_avatar' width='160' height='136' src="/img/me.min.png"  />
      <h4 rel='author'>Jeferson Arboleda</h4>
    </div>
    <div class='author_description_container'>
      <p>Looking for a challenge :) | Currently interested in <a href="https://docker.com">Docker</a>, <a href="https://kubernetes.io/">kubernetes</a>, and <a href="https://www.ibm.com/cloud-computing/bluemix/">IBM bluemix</a></p>
      <div class='authorsocial'>
        
          <a href='https://www.linkedin.com/in/jeferson-arboleda-167429134' target='_blank'><i class='fa fa-linkedin'></i></a>
        
        
          <a href='https://github.com/jag10' target='_blank'><i class='fa fa-github'></i></a>
        
        
          <a href='https://gitlab.com/jag7' target='_blank'><i class='fa fa-gitlab'></i></a>
        
        
          <a href='https://twitter.com/j_a_g_x' target='_blank'><i class='fa fa-twitter'></i></a>
        
      </div>
    </div>
</div>

  
  <h4>On This Page</h4>
  <div class='table_of_contents'>
    <nav id="TableOfContents">
<ul>
<li>
<ul>
<li><a href="#dir-structure">Dir structure</a></li>
<li><a href="#installing-additional-php-versions">Installing additional PHP versions</a></li>
<li><a href="#troubleshooting">Troubleshooting</a></li>
<li><a href="#installing-mysql-and-phpmyadmin">Installing mysql and phpmyadmin</a></li>
</ul></li>
</ul>
</nav>
  </div>
  
</div>


    </aside>
    <div class='clearfix'></div>
  </div>
  <footer>
  <div class='footer-container'>
    <div class='pure-u-1 pure-u-md-1-3'>
      <div class='widget popular-posts'>
        <div class="widget-title">
          <h2>Other posts</h2></div>
        <div class='widget-content popular-posts'>
          <ul>
            
             
            <li>
              <div class='item-content'>
                <div class='item-thumbnail'>
                  <a href='/articles/installing-magento2-on-cwp/' target='_blank'>
                    <img alt='Installing magento2 on cwp' width='72' height='72' src="/articles/img/thumbs/installing-magento2-on-cwp.jpg" />
                  </a>
                </div>
                <div class='item-title'>
                  <a href='/articles/installing-magento2-on-cwp/' class="mostVisitedLink">Installing magento2 on cwp</a>
                </div>
              </div>
            </li>
            
            
             
            <li>
              <div class='item-content'>
                <div class='item-thumbnail'>
                  <a href='/articles/installing-ubuntu-16.04-on-odroid-xu3-lite/' target='_blank'>
                    <img alt='Installing ubuntu 16.04 on odroid xu3 lite' width='72' height='72' src="/articles/img/thumbs/installing-ubuntu-16.04-on-odroid-xu3-lite.jpg" />
                  </a>
                </div>
                <div class='item-title'>
                  <a href='/articles/installing-ubuntu-16.04-on-odroid-xu3-lite/' class="mostVisitedLink">Installing ubuntu 16.04 on odroid xu3 lite</a>
                </div>
              </div>
            </li>
            
            
             
            <li>
              <div class='item-content'>
                <div class='item-thumbnail'>
                  <a href='/articles/zipping-and-unzipping-websites-with-php/' target='_blank'>
                    <img alt='Zipping and unzipping websites with php' width='72' height='72' src="/articles/img/thumbs/zipping-and-unzipping-websites-with-php.png" />
                  </a>
                </div>
                <div class='item-title'>
                  <a href='/articles/zipping-and-unzipping-websites-with-php/' class="mostVisitedLink">Zipping and unzipping websites with php</a>
                </div>
              </div>
            </li>
            
            
          </ul>
        </div>
      </div>
    </div>
    <div class='pure-u-1 pure-u-md-1-3'>
      <div class='widget ContactForm'>
        <h2 class='title'>Contact me</h2>
        <a class="email" href="mailto:me@jarboleda.me">me@jarboleda.me</a>
        <div class='contact-form-widget'>
          <div class='form'>
            <form name='contact-form' action="https://formspree.io/me@jarboleda.me" method="POST">
              <p>Name</p>
              <input class='contact-form-name' name='name' size='30' type='text' value='' />
              <p>Email<span>*</span></p>
              <input class='contact-form-email' name='name="_replyto"' size='30' type='text' value='' />
              <p>Message<span>*</span></p>
              <p><textarea class='contact-form-email-message' cols='29' name='email-message' rows='5'></textarea></p>
              <input class='contact-form-button contact-form-button-submit' type='submit' value='Send' />
              <div style='text-align: center; max-width: 222px; width: 100%'>
                <p class='contact-form-error-message'></p>
                <p class='contact-form-success-message'></p>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>
  
  <div class='footer-credits'>
    <div class='footer_social-icons'>
      <ul>
        
        <li>
          <a class="btn-linkedin" href='https://www.linkedin.com/in/jeferson-arboleda-167429134' target='_blank'><i class='fa fa-linkedin'></i></a>
        </li>
        
        
        <li>
          <a class="btn-github" href='https://github.com/jag10' target='_blank'><i class='fa fa-github'></i></a>
        </li>
        
        
        <li>
          <a class="btn-gitlab" href='https://gitlab.com/jag7' target='_blank'><i class='fa fa-gitlab'></i></a>
        </li>
        
        
        <li>
          <a class="btn-twitter" href='https://twitter.com/j_a_g_x' target='_blank'><i class='fa fa-twitter'></i></a>
        </li>
        
      </ul>
    </div>
    <div class='clr'></div>
    <p>Copyright &#169; 2017
      <a href='https://www.jarboleda.me'>https://www.jarboleda.me</a>
    </p>
    <p class='attribution'>Powered by</p>
    <a href='https://gohugo.io/' target="_blank" >
      <img with="80" height="21" alt="hugo logo" class='attribution_logo' src="/img/hugo-logo.png" />
    </a>
  </div>
</footer>

<script defer src='/js/main.min.js' type='text/javascript'></script>

<script type="text/javascript">
  window.cookieconsent_options = {
    "message": "This website uses cookies to ensure you get the best experience on our website",
    "dismiss": "Got it!",
    "learnMore": "More info",
    "link": null,
    "theme": "light-bottom"
  };
</script>
<script defer type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/1.0.10/cookieconsent.min.js"></script>



<script>
window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
ga('create', 'UA-101857703-1', 'auto');
ga('send', 'pageview');
</script>
<script async src='//www.google-analytics.com/analytics.js'></script>


</body>
</html>

