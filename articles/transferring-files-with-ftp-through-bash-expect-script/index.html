
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta content='text/html; charset=UTF-8' http-equiv='Content-Type' />
    <meta name=viewport content="width=device-width, initial-scale=1">
    <title>Arboleda - Transferring files with FTP through bash expect script</title>
    <meta name="description" content="The blog of Jeferson Arboleda, software engineer. It&#39;s focused on self improvement and overcoming challenges I find everyday">
    <meta name="robots" content="noindex">
    
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/manifest.json">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="theme-color" content="#ffffff">
    	
	<meta property="og:title" content="Transferring files with FTP through bash expect script" />
	<meta property="og:description" content="If you use to transfer backups through ftp, it can be very handy to write a bash script to put a file in a remote server in an easy way. With this script, transferring a file will be as easy as this: ./ftpConnect localFile remoteFile  In the script you&rsquo;ll need to define some data: your FTP server&rsquo;s IP and a valid user and password combination. #!/bin/bash #use absolute paths (i." />
	<meta property="og:type" content="website" />
	<meta property="og:url" content="https://www.jarboleda.me/articles/transferring-files-with-ftp-through-bash-expect-script/" />
	<meta property="og:image" content="https://www.jarboleda.me/articles/img/transferring-files-with-ftp-through-bash-expect-script.png" />
	<meta property="og:updated_time" content="2015-08-30 11:03:31 &#43;0200 CEST"/>
	<meta property="og:locale" content="en-US" />
	<meta property="og:site_name" content="Arboleda" />
	
	
	<meta property="article:published_time" content="2015-08-30 11:03:31 &#43;0200 CEST" />
	<meta property="article:modified_time" content="2015-08-30 11:03:31 &#43;0200 CEST" />
	<meta property="article:section" content="articles" />
	<meta property="article:tag" content="backups" />
	<meta property="article:tag" content="ftp" />
	<meta property="article:tag" content="bash" />
	
	
    
    <meta itemprop="name" content="Transferring files with FTP through bash expect script">
    <meta itemprop="description" content="If you use to transfer backups through ftp, it can be very handy to write a bash script to put a file in a remote server in an easy way. With this script, transferring a file will be as easy as this: ./ftpConnect localFile remoteFile  In the script you&rsquo;ll need to define some data: your FTP server&rsquo;s IP and a valid user and password combination. #!/bin/bash #use absolute paths (i.">
    <meta name="author" content="Jeferson Arboleda">
    
    <meta itemprop="image" content="transferring-files-with-ftp-through-bash-expect-script.png">
    
    <meta itemprop="keywords" content="notpinned,pinned,,true,serie1,backup,backups,bash,centos6,curl,cwp,facebook,fail2ban,fedora25,fopen,ftp,httpd,iptables,ipv6,magento,magento2,mate,mysql,mysqldump,nodejs,odroid,performance,php,php7,piwik,plesk,processwire,reflectionmethod,sass,ubuntu,unrealengine,vagrant,vm,vps,zip," />
    <meta itemprop="wordCount" content="277">
	
	<meta name="twitter:card" content="summary_large_image"/>
	<meta name="twitter:image:src" content="https://www.jarboleda.me/articles/img/transferring-files-with-ftp-through-bash-expect-script.png"/>
	
	<meta name="twitter:title" content="Transferring files with FTP through bash expect script"/>
	<meta name="twitter:description" content="If you use to transfer backups through ftp, it can be very handy to write a bash script to put a file in a remote server in an easy way. With this script, transferring a file will be as easy as this: ./ftpConnect localFile remoteFile  In the script you&rsquo;ll need to define some data: your FTP server&rsquo;s IP and a valid user and password combination. #!/bin/bash #use absolute paths (i."/>
	<meta name="twitter:site" content="@j_a_g_x"/>
	
	<meta name="twitter:creator" content="@j_a_g_x"/>


	<meta name="news_keywords" content="backups,ftp,bash" />

    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">
    <link href="/css/global.min.css" media="screen" rel="stylesheet" type="text/css" />
  </head>
 <body>
  <header>
    <nav class='top-menu'>
      
      <div class="menu-wrapper" id="menu">
        <div class="pure-u-1 hidden">
          <div class="pure-menu menu-toogle-container">
            <a class="custom-toggle" id="toggle"><s class="bar"></s><s class="bar"></s></a>
          </div>
        </div>
        <div class="pure-u-1">
          <div class="pure-menu pure-menu-horizontal custom-can-transform">
            <ul class="pure-menu-list float-left">
              
              <li class="pure-menu-item"><a class='pure-menu-link' href=/>home</a></li>
              
              <li class="pure-menu-item"><a class='pure-menu-link' href=/extras/cv/>about me</a></li>
              
              <li class="pure-menu-item"><a class='pure-menu-link' href=/projects/>projects</a></li>
              
              <li class="pure-menu-item"><a class='pure-menu-link' href=https://github.com/jag10>github</a></li>
              
              <li class="pure-menu-item"><a class='pure-menu-link' href=https://gitlab.com/jag7>gitlab</a></li>
              
              <li class='pure-menu-item lang_selector selected'>
                
                <a class='pure-menu-link' href="#">English</a>
                
              </li>
              <li class='pure-menu-item flag'><i class='fa fa-language' aria-hidden='true'></i></li>
              
            </ul>
            <div class="float-right">
              <ul class="pure-menu-list">
                
                <li class="pure-menu-item social_menu_entry">
                  <a href='https://www.linkedin.com/in/jeferson-arboleda-167429134' target='_blank'><i class='fa fa-linkedin'></i></a>
                </li>
                
                
                <li class="pure-menu-item social_menu_entry">
                  <a href='https://github.com/jag10' target='_blank'><i class='fa fa-github'></i></a>
                </li>
                
                
                <li class="pure-menu-item social_menu_entry">
                  <a href='https://gitlab.com/jag7' target='_blank'><i class='fa fa-gitlab'></i></a>
                </li>
                
                
                <li class="pure-menu-item social_menu_entry">
                  <a href='https://twitter.com/j_a_g_x' target='_blank'><i class='fa fa-twitter'></i></a>
                </li>
                
                <li class='pure-menu-item nt-search' id='nt-search'>
                  <form action='/search/' id='searchform' method='get'>
                    <div class='nt-search-input-wrap'>
                      <input class='nt-search-input' id='s' name='q' placeholder='Search is disabled :(' type='text' value='' disabled />
                    </div>
                    <input class='nt-search-submit' id='go' type='submit' value='Search' />
                    <span class='nt fa fa-search'></span>
                  </form>
                </li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </nav>
    
    
  </header>

  <div class="main-container">
    <section id="main" class="pure-u-1 pure-u-md-3-4">
      <article>
        <div class="post-container">
  <div class="post-image-container">
    
  </div>
  <div class="article_summary">
    <div class="article-date">
      <p class="day"><i class="fa fa-calendar"></i>30 Aug 2015</p>
      <p><i class="fa fa-clock-o"></i>3 min read  ~ 300 words</p>
    </div>
    
    <div class="article-tags">
      
      <a href="#" rel="tag">backups</a> 
      <a href="#" rel="tag">ftp</a> 
      <a href="#" rel="tag">bash</a> 
    </div>
    
    <div class="clearfix"></div>
    
    <h1 class="article_title title">Transferring files with FTP through bash expect script</h1>
    
    <div class="article_excerpt">
      
      <p><p>If you use to transfer backups through ftp, it can be very handy to write a bash script to put a file in a remote server in an easy way. With this script, transferring a file will be as easy as this:
<div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span></span>./ftpConnect localFile remoteFile
</pre></div>

In the script you&rsquo;ll need to define some data: your FTP server&rsquo;s IP and a valid user and password combination.
<div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span></span><span style="color: #75715e">#!/bin/bash</span>
<span style="color: #75715e">#use absolute paths (i.e. /var/www/vhosts/) for params:</span>
<span style="color: #f8f8f2">localFile</span><span style="color: #f92672">=</span><span style="color: #f8f8f2">$1</span>
<span style="color: #f8f8f2">remoteFile</span><span style="color: #f92672">=</span><span style="color: #f8f8f2">$2</span>

<span style="color: #f8f8f2">echo</span> <span style="color: #e6db74">&quot;Bash script about to invoke ftp with expect&quot;</span>

/bin/cat <span style="color: #e6db74">&lt;&lt; EOF | /usr/bin/expect</span>
<span style="color: #e6db74">spawn /usr/bin/ftp</span>

<span style="color: #e6db74">set timeout -1</span>

<span style="color: #e6db74">expect &quot;ftp&gt; &quot;</span>
<span style="color: #e6db74">send &quot;open\r&quot;</span>

<span style="color: #e6db74">expect &quot;(to) &quot;</span>
<span style="color: #e6db74">send &quot;aaa.bbb.ccc.ddd\r&quot;</span>

<span style="color: #e6db74">send &quot;user\r&quot;</span>

<span style="color: #e6db74">expect &quot;Password:&quot;</span>
<span style="color: #e6db74">send &quot;password\r&quot;</span>

<span style="color: #e6db74">expect &quot;ftp&gt; &quot;</span>
<span style="color: #e6db74">send &quot;binary\r&quot;</span>

<span style="color: #e6db74">expect &quot;ftp&gt; &quot;</span>
<span style="color: #e6db74">send &quot;put $localFile $remoteFile\r&quot;</span>

<span style="color: #e6db74">expect &quot;ftp&gt; &quot;</span>
<span style="color: #e6db74">send &quot;bye\r&quot;</span>

<span style="color: #e6db74">interact</span>
<span style="color: #e6db74">EOF</span>

<span style="color: #f8f8f2">echo</span> <span style="color: #e6db74">&quot;Bash script call to ftp through expect complete. Continuing with additional processing&quot;</span>
</pre></div>
</p>

<p>You have to set timeout -1 so expect doesn&rsquo;t close while you transfer files. Also, I had trouble when transferring files to a FTP Windows server until I used binary mode. You should check the integrity of your files once you have successfully transferred them, you may find out they are corrupt. As I said, I solved this issue using binary mode.</p>

<p>There you go, now you can easily transfer files to your FTP server. Remember to set permissions correctly, you and only you should be able to read this file, since it contains a valid user and password for your FTP server.
I use this to backup database dumps, but you can transfer whatever you want.</p>

<p>*This script works with FileZilla server. You may have to tweak it to work with your FTP server.</p>
</p>
      
    </div>
    <div class="clearfix"></div>
    
    <div class="article_resources">
      <h2>Resources</h2>
      <ul>
        
        <li>
          
          <a target="_blank" href="https://linux.die.net/man/1/expect">Expect on linux.die.net</a> 
        </li>
        
      </ul>
    </div>
    
    <div class="article-footer">
      
      




<div class="soc-sharing">
  <ul class="article_share_items">
    <li>
      <a class="fa fa-linkedin" href="http://www.linkedin.com/shareArticle?mini=true&amp;url=https://www.jarboleda.me/articles/transferring-files-with-ftp-through-bash-expect-script/&amp;title=Transferring%20files%20with%20FTP%20through%20bash%20expect%20script&amp;summary=If%20you%20use%20to%20transfer%20backups%20through%20ftp,%20it%20can%20be%20very%20handy%20to%20write%20a%20bash%20script%20to%20put%20a%20file%20in%20a%20remote%20server%20in%20an%20easy%20way.%20With%20this%20script,%20transferring%20a%20file%20will%20be%20as%20easy%20as%20this:%20./ftpConnect%20localFile%20remoteFile%20%20In%20the%20script%20you&amp;rsquo;ll%20need%20to%20define%20some%20data:%20your%20FTP%20server&amp;rsquo;s%20IP%20and%20a%20valid%20user%20and%20password%20combination.%20#!/bin/bash%20#use%20absolute%20paths%20%28i.&amp;source=Arboleda" onclick="window.open(this.href, 'windowName', 'width=550, height=600, left=24, top=24, scrollbars, resizable'); return false" rel="nofollow" target="_blank"></a>
    </li>
    <li>
      <a class="fa fa-twitter" href="http://twitter.com/share?text=Transferring%20files%20with%20FTP%20through%20bash%20expect%20script&amp;url=https://www.jarboleda.me/articles/transferring-files-with-ftp-through-bash-expect-script/" onclick="window.open(this.href, 'windowName', 'width=550, height=600, left=24, top=24, scrollbars, resizable'); return false" rel="nofollow" target="_blank"></a>
    </li>
    <li>
      <a class="fa fa-facebook" href="https://www.facebook.com/sharer/sharer.php?u=https://www.jarboleda.me/articles/transferring-files-with-ftp-through-bash-expect-script/" onclick="window.open(this.href, 'windowName', 'width=550, height=600, left=24, top=24, scrollbars, resizable'); return false" rel="nofollow" target="_blank"></a>
    </li>
    <li>
      <a class="fa fa-google-plus" href="https://plus.google.com/share?url=https://www.jarboleda.me/articles/transferring-files-with-ftp-through-bash-expect-script/" onclick="window.open(this.href, 'windowName', 'width=550, height=600, left=24, top=24, scrollbars, resizable'); return false" rel="nofollow" target="_blank"></a>
    </li>
    <li>
      <a class="fa fa-pinterest" href="https://pinterest.com/pin/create/button/?url=https://www.jarboleda.me/articles/transferring-files-with-ftp-through-bash-expect-script/&amp;media=https://www.jarboleda.metransferring-files-with-ftp-through-bash-expect-script.png&amp;description=If%20you%20use%20to%20transfer%20backups%20through%20ftp,%20it%20can%20be%20very%20handy%20to%20write%20a%20bash%20script%20to%20put%20a%20file%20in%20a%20remote%20server%20in%20an%20easy%20way.%20With%20this%20script,%20transferring%20a%20file%20will%20be%20as%20easy%20as%20this:%20./ftpConnect%20localFile%20remoteFile%20%20In%20the%20script%20you&amp;rsquo;ll%20need%20to%20define%20some%20data:%20your%20FTP%20server&amp;rsquo;s%20IP%20and%20a%20valid%20user%20and%20password%20combination.%20#!/bin/bash%20#use%20absolute%20paths%20%28i." onclick="window.open(this.href, 'windowName', 'width=550, height=600, left=24, top=24, scrollbars, resizable'); return false" rel="nofollow" target="_blank"></a>
    </li>
  </ul>
</div>

    </div>

    <div class='post-footer'>
      
       <div id="disqus_thread"></div>
<script>





var disqus_shortname = 'jarboleda-me';
(function() { 
var d = document, s = d.createElement('script');
s.src = 'https://jarboleda-me.disqus.com/embed.js';
s.async = true; 
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>

     
    </div>
  </div>
</div>

      </article>
    </section><aside class='sidebar-wrapper pure-u-1 pure-u-md-1-4 sticky'>
      
<div class='sidebar'>
  

<div class='authorboxwrap'>
<h4>Author</h4>
    <div class='avatar-container'>
      <img alt="author's photo" class='author_avatar' height='96' src="/img/me2.min.png" width='96' />
      <h4 rel='author'>Jeferson Arboleda</h4>
    </div>
    <div class='author_description_container'>
      <p>Looking for a challenge :) | Currently interested in <a href="https://docker.com">Docker</a>, <a href="https://kubernetes.io/">kubernetes</a>, and <a href="https://www.ibm.com/cloud-computing/bluemix/">IBM bluemix</a></p>
      <div class='authorsocial'>
        
          <a href='https://www.linkedin.com/in/jeferson-arboleda-167429134' target='_blank'><i class='fa fa-linkedin'></i></a>
        
        
          <a href='https://github.com/jag10' target='_blank'><i class='fa fa-github'></i></a>
        
        
          <a href='https://gitlab.com/jag7' target='_blank'><i class='fa fa-gitlab'></i></a>
        
        
          <a href='https://twitter.com/j_a_g_x' target='_blank'><i class='fa fa-twitter'></i></a>
        
      </div>
    </div>
</div>

  
  <h4>On This Page</h4>
  <div class='table_of_contents'>
    
  </div>
  
</div>


    </aside>
    <div class='clearfix'></div>
  </div>
  <footer>
  <div class='footer-container'>
    <div class='pure-u-1 pure-u-md-1-3'>
      <div class='widget popular-posts'>
        <div class="widget-title">
          <h2>Other posts</h2></div>
        <div class='widget-content popular-posts'>
          <ul>
            
            <li>
              <div class='item-content'>
                <div class='item-thumbnail'>
                  <a href='/articles/configuring-iptables-and-fail2ban-on-centos-6/' target='_blank'>
                    <img alt='Configuring IPTABLES and fail2ban on centOS 6' width='72' height='72' src="/articles/img/thumbs/configuring-iptables-and-fail2ban-on-centos-6.jpg" />
                  </a>
                </div>
                <div class='item-title'>
                  <a href='/articles/configuring-iptables-and-fail2ban-on-centos-6/' class="mostVisitedLink">Configuring IPTABLES and fail2ban on centOS 6</a>
                </div>
              </div>
            </li>
            
            <li>
              <div class='item-content'>
                <div class='item-thumbnail'>
                  <a href='/articles/installing-unreal-engine-on-fedora-25/' target='_blank'>
                    <img alt='installing unreal engine on fedora 25' width='72' height='72' src="/articles/img/thumbs/unreal_engine.min.jpg" />
                  </a>
                </div>
                <div class='item-title'>
                  <a href='/articles/installing-unreal-engine-on-fedora-25/' class="mostVisitedLink">installing unreal engine on fedora 25</a>
                </div>
              </div>
            </li>
            
            <li>
              <div class='item-content'>
                <div class='item-thumbnail'>
                  <a href='/articles/installing-ubuntu-16.04-on-odroid-xu3-lite/' target='_blank'>
                    <img alt='Installing ubuntu 16.04 on odroid xu3 lite' width='72' height='72' src="/articles/img/thumbs/installing-ubuntu-16.04-on-odroid-xu3-lite.jpg" />
                  </a>
                </div>
                <div class='item-title'>
                  <a href='/articles/installing-ubuntu-16.04-on-odroid-xu3-lite/' class="mostVisitedLink">Installing ubuntu 16.04 on odroid xu3 lite</a>
                </div>
              </div>
            </li>
            
          </ul>
        </div>
      </div>
    </div>
    <div class='pure-u-1 pure-u-md-1-3'>
      <div class='widget ContactForm'>
        <h2 class='title'>Contact me</h2>
        <a class="email" href="mailto:me@jarboleda.me">me@jarboleda.me</a>
        <div class='contact-form-widget'>
          <div class='form'>
            <form name='contact-form' action="https://formspree.io/me@jarboleda.me" method="POST">
              <p>Name</p>
              <input class='contact-form-name' name='name' size='30' type='text' value='' />
              <p>Email<span>*</span></p>
              <input class='contact-form-email' name='name="_replyto"' size='30' type='text' value='' />
              <p>Message<span>*</span></p>
              <p><textarea class='contact-form-email-message' cols='29' name='email-message' rows='5'></textarea></p>
              <input class='contact-form-button contact-form-button-submit' type='submit' value='Send' />
              <div style='text-align: center; max-width: 222px; width: 100%'>
                <p class='contact-form-error-message'></p>
                <p class='contact-form-success-message'></p>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>
  
  <div class='footer-credits'>
    <div class='footer_social-icons'>
      <ul>
        
        <li>
          <a class="btn-linkedin" href='https://www.linkedin.com/in/jeferson-arboleda-167429134' target='_blank'><i class='fa fa-linkedin'></i></a>
        </li>
        
        
        <li>
          <a class="btn-github" href='https://github.com/jag10' target='_blank'><i class='fa fa-github'></i></a>
        </li>
        
        
        <li>
          <a class="btn-gitlab" href='https://gitlab.com/jag7' target='_blank'><i class='fa fa-gitlab'></i></a>
        </li>
        
        
        <li>
          <a class="btn-twitter" href='https://twitter.com/j_a_g_x' target='_blank'><i class='fa fa-twitter'></i></a>
        </li>
        
      </ul>
    </div>
    <div class='clr'></div>
    <p>Copyright &#169; 2017
      <a href='https://www.jarboleda.me'>https://www.jarboleda.me</a>
    </p>
    <p class='attribution'>Powered by</p>
    <a href='https://gohugo.io/'>
      <img alt="hugo logo" class='attribution_logo' src="/img/hugo-logo.png" />
    </a>
  </div>
</footer>

<script defer src='/js/main.min.js' type='text/javascript'></script>

<script type="text/javascript">
  window.cookieconsent_options = {
    "message": "This website uses cookies to ensure you get the best experience on our website",
    "dismiss": "Got it!",
    "learnMore": "More info",
    "link": null,
    "theme": "light-bottom"
  };
</script>
<script defer type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/1.0.10/cookieconsent.min.js"></script>

</body>
</html>

